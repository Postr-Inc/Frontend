"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{3257:function(e,s,t){t.d(s,{Z:function(){return o}});var l=t(5893);function o(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("dialog",{style:e.style,id:e.id,className:"sm:modal \n              ".concat("dark"===theme?"bg-black ":"bg-white ","\n              xl:rounded-box  \n              \n              "),children:(0,l.jsx)("div",{style:{width:e.width,height:e.height},className:"       shadow-none  \n                  ".concat(e.className,"\n                "),children:e.children})})})}},230:function(e,s,t){t.d(s,{k:function(){return c},h:function(){return d}});var l=t(5893),o=t(7294),a=t(2545);function r(){return a.h.authStore.model().postr_plus?(0,l.jsx)("div",{className:"justify-center  flex text-center mx-auto",children:(0,l.jsx)("h1",{children:"You are a premium member"})}):(0,l.jsx)("div",{className:"justify-center  flex text-center mx-auto",children:(0,l.jsxs)("div",{className:"justify-center flex flex-col gap-3 text-center  ",children:[(0,l.jsx)("h1",{className:"text-6xl text-sans font-bold text-center text-[#121212] mt-20",children:"Subscribe to Postr Premium"}),(0,l.jsx)("p",{className:"w-[50rem]",children:"Get access to new features before everyone, a sleek badge and heatfelt commendment for becoming a supporter of the project."})]})})}var n=t(2506);function i(e){let[s,t]=(0,o.useState)(""),[r,i]=(0,o.useState)([]),[d,c]=(0,o.useState)(!1);window.postModalParemeters;let[h,m]=(0,o.useState)([]),[u,x]=(0,o.useState)({}),[p,w]=(0,o.useState)(!1),[f,v]=(0,o.useState)({});async function g(){let l={message:"",id:""};switch(r.length>0&&(r=(r=await Promise.all(r.map(async e=>e.size>18e5?(l.message="One or more of your images are too large",l.id=e.name,m(e=>[...e,l]),null):{name:e.name,type:e.type,size:e.size,data:await a.h.getAsByteArray(new Blob([e],{type:e.type}))}))).filter(e=>null!==e)),!0){case s.length<1:x({message:"You must enter some text"}),setTimeout(()=>{x(!1)},3e3);return;case r.length>4:alert("You can only upload 4 images");return;case p:return;default:try{var o;w(!0),c(!0);let l=await a.h.create({collection:"posts",expand:["repost"],record:{author:a.h.authStore.model().id,content:s,..."repost"==f.type?{repost:f.post.id,isRepost:!0}:{},file:{isFile:!0,file:await Promise.all(r)},comments:[],likes:[]}});i([]),w(!1),t(""),e.setParams({id:l.id,type:"posts"}),e.swapPage("view"),null===(o=document.getElementById("createPost"))||void 0===o||o.close(),c(!1)}catch(e){w(!1),c(!1),console.error(e)}}}return window.setPostModalParams=e=>{v(e)},console.log(f),(0,o.useEffect)(()=>{if(Object.keys(f).length>0){var e;null===(e=document.getElementById("createPost"))||void 0===e||e.showModal()}},[f]),(0,l.jsx)("dialog",{style:{borderRadius:"10px",border:"dark"==theme?"1px solid #2d2d2d":"1px solid #f9f9f9"},id:"createPost",className:"sm:modal  sm:modal-middle   p-5  xl:w-[25vw] rounded-box\n    \n    ",children:(0,l.jsxs)("div",{style:{borderRadius:"10px"},className:"sm:modal-box ",children:[(0,l.jsxs)("div",{className:"flex hero justify-between",children:[(0,l.jsx)("p",{className:"cursor-pointer hover:text-red-500",onClick:()=>{var e;null===(e=document.getElementById("createPost"))||void 0===e||e.close(),v({}),w(!1),c(!1),i([])},children:"Cancel"}),(0,l.jsx)("button",{className:"text-blue-500 text-md focus:outline-none",children:"Drafts"})]}),(0,l.jsxs)("div",{className:" py-4 flex flex-col \n      ".concat(r.length>0?s.length/280>1?"h-96":"h-100":"h-32","\n      ;\n\n\n\n\n      "),style:{height:s.length>0||"repost"===f.type?"auto":" "},children:[(0,l.jsxs)("div",{className:"flex flex-row      ",children:[a.h.authStore.model().avatar?(0,l.jsx)("img",{src:a.h.authStore.img(),className:"w-10 h-10 rounded-full object-cover"}):(0,l.jsx)("div",{className:"avatar placeholder",children:(0,l.jsx)("div",{className:"bg-base-300 text-black   avatar  w-10 h-10  border cursor-pointer rounded   border-white",children:(0,l.jsx)("span",{className:"text-2xl",children:a.h.authStore.model().username.charAt(0).toUpperCase()})})}),(0,l.jsxs)("div",{className:"flex  flex-col mx-2 w-full mb-12",children:[(0,l.jsx)("textarea",{className:"w-full h-full focus:outline-none resize-none",placeholder:"repost"==f.type?"Add a comment":"What's happening?",value:s,onChange:e=>{t(e.target.value)}}),(0,l.jsx)("div",{className:"mt-2",children:"repost"==f.type?(0,l.jsx)(n.Z,{isCreating:!0,notInteractable:!0,...f.post,expand:f.post.expand,...e}):""})]})]}),(0,l.jsx)("div",{className:"scroll overflow-y-hidden",children:r.length>0&&(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Object.keys(r).map(e=>(console.log(h),h.find(s=>s.id==r[e].name),(0,l.jsxs)("div",{className:"relative  w-full",children:[(0,l.jsx)("img",{src:URL.createObjectURL(r[e]),className:" object-cover w-32 h-32 rounded-md\n                        xl:col-span-2 sm:col-span-1\n                        ".concat(h.find(s=>s.id==r[e].name)?"border-2 border-red-500 opacity-20":"","\n                        ")}),(0,l.jsx)("div",{onClick:()=>{i(r.filter(s=>s.name!==r[e].name))},className:"absolute btn btn-circle btn-sm top-1 right-1",children:"X"}),h.find(s=>s.id==r[e].name)?(0,l.jsx)("p",{ref:s=>{s&&(s.innerHTML=h.find(s=>s.id==r[e].name).message,setTimeout(()=>{m(h.filter(s=>s.id!==r[e].name))},3e3))},className:"text-red-500  absolute top-9 left-2 text-sm"}):""]},e)))})})]}),(0,l.jsx)("div",{className:"divider mt-0 mb-2 before:bg-[#f6f4f4] after:bg-[#fdf9f9]  after:text-slate-200"}),(0,l.jsxs)("div",{className:"flex  h-full justify-between",children:[(0,l.jsx)("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*",multiple:!0,max:4,onChange:e=>{if(Array.from(e.target.files).map(e=>{if(e.size>2e6){console.log("Too large",e.name),m(s=>[...s,{message:"\n                 Quota exceeded\n                 <br>\n                 <br>\n                This image will not be uploaded\n                ",id:e.name}]);return}}),e.target.files.length>4){x({message:"You can only upload 4 images"});return}i(Array.from(e.target.files)),e.target.value=""}}),(0,l.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-row gap-2",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}),(0,l.jsxs)("p",{className:"  ",children:[s.length,"/",280]}),d?(0,l.jsx)("div",{className:"loading loading-spinner text-blue-500"}):(0,l.jsx)("button",{onClick:()=>{g()},className:"btn  btn-sm rounded-full ",children:"Post"})]})]})})}function d(e){var s,t;let[r,n]=(0,o.useState)(""),[i,d]=(0,o.useState)([]),[c,h]=(0,o.useState)([]),[m,u]=(0,o.useState)(!1);function x(){a.h.list({collection:"users",expand:["followers","following"],sort:"+followers",filter:'followers !~"'.concat(a.h.authStore.model().id,'" && id != "').concat(a.h.authStore.model().id,'"'),cacheKey:"relevant-people-"+a.h.authStore.model().id,limit:3,page:1}).then(e=>{h(e.items)})}return(0,o.useEffect)(()=>{x()},[]),(0,o.useEffect)(()=>{x()},[m]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"xl:drawer   xl:w-[auto] xl:drawer-end xl:drawer-open lg:drawer-open   ",children:[(0,l.jsx)("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),(0,l.jsxs)("div",{className:"drawer-side",children:[(0,l.jsx)("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),(0,l.jsxs)("ul",{className:"p-4   w-80  min-h-full   text-base-content",children:[(0,l.jsx)("li",{className:"\n              ".concat("dark"==theme?"xl:border xl:border-[#121212]":"xl:border xl:border-[#ecececd8]","  p-5 rounded-lg"),children:(0,l.jsxs)("a",{className:"w-full relative",children:[(0,l.jsx)("h1",{className:"font-bold text-lg",children:"Relevant People"}),c.map((s,t)=>(0,l.jsx)("div",{className:"flex flex-row gap-2\n                      ".concat("mt-5","\n                      "),children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[s.avatar?(0,l.jsx)("img",{src:a.h.cdn.url({id:s.id,collection:"users",file:s.avatar}),className:"w-10 h-10 rounded"}):(0,l.jsx)("div",{className:"avatar placeholder  ",children:(0,l.jsx)("div",{className:"bg-base-200 text-black rounded w-10 h-10   avatar    border-2   shadow   border-white",children:(0,l.jsx)("span",{className:"text-2xl",children:s.username.charAt(0).toUpperCase()||"U"})})}),(0,l.jsxs)("div",{className:"flex hero justify-between",children:[(0,l.jsxs)("span",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"cursor-pointer",onClick:()=>{e.setParams({user:s.id}),e.swapPage("user")},children:s.username}),(0,l.jsx)("p",{})]}),(0,l.jsx)("button",{onClick:()=>{a.h.update({collection:"users",id:s.id,cacheKey:"relevant-people-".concat(a.h.authStore.model().id),invalidateCache:["relevant-people-".concat(a.h.authStore.model().id),"user-following-".concat(a.h.authStore.model().id)],immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{followers:s.followers.concat(a.h.authStore.model().id)}}).then(e=>{console.log(e),a.h.update({collection:"users",id:a.h.authStore.model().id,invalidateCache:"user-home-".concat(a.h.authStore.model().id),immediatelyUpdate:!0,cacheKey:"user-".concat(a.h.authStore.model().id),expand:["followers","following","following.followers","following.following"],record:{following:a.h.authStore.model().following.concat(s.id)}}).then(e=>{a.h.authStore.update(),u(!m)})})},className:"btn absolute right-1 btn-sm bg-black rounded-full text-white border-none",children:s.followers.includes(a.h.authStore.model().id)?"Unfollow":"Follow"})]})]}),(0,l.jsx)("p",{className:"w-[200px]",children:s.bio})]})}))]})}),(0,l.jsxs)("li",{className:"flex flex-col gap-5 mt-2 p-2 text-sm",children:[(0,l.jsxs)("li",{className:"flex flex-row gap-5",children:[(0,l.jsx)("a",{className:"cursor-pointer hover:underline",children:"Terms of service"}),(0,l.jsx)("a",{href:"/information/privacy.pdf",className:"cursor-pointer hover:underline",children:"Privacy Policy"})]}),(0,l.jsxs)("li",{className:"flex flex-row gap-5",children:[(0,l.jsx)("a",{href:"",className:"cursor-pointer hover:underline",children:"Help and safety"}),(0,l.jsx)("a",{className:"cursor-pointer hover:underline",children:"Accessibility"})]}),(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"tooltip cursor-pointer","data-tip":"Your app version",children:["pkg version:"," ",null===(t=window)||void 0===t?void 0:null===(s=t.postr)||void 0===s?void 0:s.version]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{children:["\xa9 2022 - ",new Date().getFullYear()," Pascal. All rights reserved"]})})]})]})]})]})})}function c(e){let[s,t]=(0,o.useState)([]),[n,d]=(0,o.useState)(""),[c,h]=(0,o.useState)(!1),[m,u]=(0,o.useState)(!1),[x,p]=(0,o.useState)([]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"xl:drawer xl:w-[auto]      xl:drawer-open lg:drawer-open  ",children:[(0,l.jsx)("input",{id:"my-drawer-3",type:"checkbox",className:"drawer-toggle"}),c?(0,l.jsx)("div",{className:"toast toast-end",children:(0,l.jsxs)("div",{className:"alert bg-red-500 bg-opacity-20",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"text-rose-500 w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),(0,l.jsx)("span",{children:c.message})]})}):"",(0,l.jsxs)("div",{className:"drawer-side",children:[(0,l.jsx)("label",{htmlFor:"my-drawer-3","aria-label":"close sidebar",className:"drawer-overlay"}),(0,l.jsxs)("ul",{className:"menu p-2  w-64  flex flex-col gap-5 min-h-full  text-base-content",children:[(0,l.jsx)("li",{className:"hover:bg-transparent",children:(0,l.jsx)("a",{className:"hover:bg-transparent focus:bg-transparent",children:(0,l.jsx)("img",{src:"/icons/icon-blue.jpg",className:"rounded",width:40,height:40})})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-xl  rounded-full focus:bg-none ".concat("home"==e.currentPage?"font-semibold text-blue-500":""),onClick:()=>{e.swapPage("home")},children:[(0,l.jsx)("svg",{className:"\n                     w-7 h-7\n                     cursor-pointer\n                      ".concat("home"==e.currentPage?"fill-blue-500":"fill-white stroke-black ","\n                     "),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:1.5,id:"home",children:(0,l.jsx)("path",{d:"M6.63477851,18.7733424 L6.63477851,15.7156161 C6.63477851,14.9350667 7.27217143,14.3023065 8.05843544,14.3023065 L10.9326107,14.3023065 C11.310188,14.3023065 11.6723007,14.4512083 11.9392882,14.7162553 C12.2062757,14.9813022 12.3562677,15.3407831 12.3562677,15.7156161 L12.3562677,18.7733424 C12.3538816,19.0978491 12.4820659,19.4098788 12.7123708,19.6401787 C12.9426757,19.8704786 13.2560494,20 13.5829406,20 L15.5438266,20 C16.4596364,20.0023499 17.3387522,19.6428442 17.9871692,19.0008077 C18.6355861,18.3587712 19,17.4869804 19,16.5778238 L19,7.86685918 C19,7.13246047 18.6720694,6.43584231 18.1046183,5.96466895 L11.4340245,0.675869015 C10.2736604,-0.251438297 8.61111277,-0.221497907 7.48539114,0.74697893 L0.967012253,5.96466895 C0.37274068,6.42195254 0.0175522924,7.12063643 0,7.86685918 L0,16.568935 C0,18.4638535 1.54738155,20 3.45617342,20 L5.37229029,20 C6.05122667,20 6.60299723,19.4562152 6.60791706,18.7822311 L6.63477851,18.7733424 Z",transform:"translate(2.5 2)"})}),"Home"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-lg  rounded-full",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"      w-7 h-7   cursor-pointer     hover:fill-black hover:text-black         ",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),"Notifications"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-lg  rounded-full",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"   w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),"Explore"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-xl  rounded-full rounded-full\n                  ".concat("user"==e.currentPage&&e.params.user.username==a.h.authStore.model().username?"font-semibold text-blue-500":"","\n                  "),onClick:()=>{e.setParams({user:a.h.authStore.model().id}),e.swapPage("user")},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"\n                   w-7 h-7\n                   ".concat("user"==e.currentPage&&e.params.user.username==a.h.authStore.model().username?"fill-blue-500":"","\n                  "),children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),"Profile"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-lg  rounded-full",onClick:()=>{e.swapPage("collections")},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M6 4.75A.75.75 0 0 1 6.75 4h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 4.75ZM6 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 10Zm0 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM1.99 4.75a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 15.25a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 10a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1V10Z",clipRule:"evenodd"})}),"Collections"]})}),(0,l.jsx)("li",{className:"text-lg  rounded-full",children:(0,l.jsxs)("a",{className:" rounded-full",onClick:()=>{document.getElementById("postr_plus").showModal()},children:[(0,l.jsx)("img",{src:"/icons/icon-blue.jpg",className:"rounded w-7 h-7"}),(0,l.jsx)("p",{children:"Premium"})]})}),(0,l.jsx)("li",{className:"text-lg  rounded-full  text-start hover:outline-none  hover:text-lg  hover:justify-start hover:rounded-full",children:(0,l.jsxs)("a",{className:" rounded-full",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),"Messages"]})}),(0,l.jsx)("button",{onClick:()=>{document.getElementById("createPost").showModal()},className:"btn rounded-full  text-lg hero btn-ghost  hover:bg-blue-500 focus:bg-blue-500 bg-blue-500 text-white ",children:(0,l.jsx)("p",{children:"Post"})})]})]})]}),(0,l.jsx)(i,{...e}),(0,l.jsx)("dialog",{id:"postr_plus",className:"modal max-w-[100vw] max-h-[100vh] w-screen h-screen  ",children:(0,l.jsx)("div",{className:"modal-box w-screen h-screen max-w-[100vw] max-h-[100vh] rounded-none",children:(0,l.jsxs)("div",{className:"flex flex-col bg-gradient-to-t fixed top-0 left-0 from-slate-50 to-blue-100 w-full h-full",children:[(0,l.jsx)("span",{className:"cursor-pointer absolute top-5 left-5  rounded-full ",onClick:()=>{var e;null===(e=document.getElementById("postr_plus"))||void 0===e||e.close()},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}),(0,l.jsx)(r,{})]})})})]})}},3054:function(e,s,t){t.d(s,{Z:function(){return Comment}});var l=t(5893),o=t(7294),a=t(2545);function Comment(e){var s,t,r;let[n,i]=(0,o.useState)([e.likes]);async function d(){!0===n.includes(a.h.authStore.model().id)?(i(n.filter(e=>e!=a.h.authStore.model().id)),await a.h.update({collection:"posts",cacheKey:e.post.cacheKey,id:e.post.id,expand:["author","likes","comments","comments.user"],skipDataUpdate:!0,record:{expand:{comments:e.post.expand.comments.map(s=>s.id!=e.id?s:Array.isArray(s.likes)?(s.likes=s.likes.filter(e=>e!=a.h.authStore.model().id),s):{...s,likes:[]}),likes:e.post.expand.likes,author:e.post.expand.author}}})):(i([...n,a.h.authStore.model().id]),await a.h.update({collection:"posts",cacheKey:e.post.cacheKey,id:e.post.id,expand:["author","likes","comments","comments.user"],skipDataUpdate:!0,record:{expand:{comments:e.post.expand.comments.map(s=>s.id!=e.id?s:Array.isArray(s.likes)?(s.likes.push(a.h.authStore.model().id),s):{...s,likes:[a.h.authStore.model().id]}),likes:e.post.expand.likes,author:e.post.expand.author}}}))}return(0,o.useEffect)(()=>{i(n.flat())},[]),(0,l.jsxs)("div",{className:"flex flex-col w-full  \n     ".concat(2==e.level?"p-5":""," \n     ").concat(e.isLast?"xl:mb-auto lg:mb-auto md:mb-auto mb-[10rem]":"","\n     ").concat("view"==e.currentPage?"p-2 xl:p-0 mt-2":"","\n     ").concat(e.statusPage?" xl:p-5\n      ".concat("dark"==theme?"hover:bg-[#090909] text-white ":"hover:bg-[#f2f2f2d0]","\n        \n       \n      "):"","\n    "),children:[(0,l.jsxs)("div",{className:"flex flex-col relative  gap-2 ".concat(e.statusPage?"":"p-2"," w-full  "),children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)("img",{src:a.h.cdn.url({id:null===(s=e.user)||void 0===s?void 0:s.id,collection:"users",file:null===(t=e.user)||void 0===t?void 0:t.avatar}),alt:"profile",className:"rounded object-cover w-12 h-12 cursor-pointer"}),(0,l.jsxs)("div",{className:"flex h-0 mt-2 mx-2 gap-2 hero ",children:[(0,l.jsx)("p",{children:null===(r=e.user)||void 0===r?void 0:r.username}),(0,l.jsxs)("p",{onClick:()=>{var s;e.setParams({user:null===(s=e.post)||void 0===s?void 0:s.expand.author}),e.swapPage("user")},className:"  text-sm opacity-60 cursor-pointer sm:hidden ",children:["@",e.expand.user.username]}),n.includes(e.post.expand.author.id)?(0,l.jsx)("div",{className:"flex  flex-row gap-2 p-2 text-sm",children:(0,l.jsxs)("div",{className:"hero flex gap-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.2,stroke:"currentColor",className:"w-4 h-4 fill-rose-500 stroke-rose-500",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),"by"," ",e.post.author==a.h.authStore.model().id?"you":e.post.expand.author.username]})}):null,e.expand.user.validVerified?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 fill-blue-500 text-white h-6",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}):null,(0,l.jsx)("p",{children:"\xb7"}),(0,l.jsxs)("p",{className:"opacity-50 font-semibold text-sm",children:[" ",(()=>{let s=new Date(e.created),t=(new Date().getTime()-s.getTime())/1e3,l=t/60,o=l/60,a=o/24,r=a/7,n=r/4,i=n/12;switch(!0){case t<60:return"".concat(Math.floor(t),"s");case l<60:return"".concat(Math.floor(l),"m");case o<24:return"".concat(Math.floor(o),"h");case a<7:return"".concat(Math.floor(a),"d");case r<4:return"".concat(Math.floor(r),"w");case n<12:return"".concat(Math.floor(n),"mo");case i>1:return"".concat(Math.floor(i),"y")}})()]}),(0,l.jsxs)("div",{className:"justify-between flex flex-row w-full  absolute end-0",children:[(0,l.jsx)("div",{className:"flex flex-row gap-5"}),(0,l.jsxs)("details",{className:"dropdown dropdown-left",children:[(0,l.jsx)("summary",{className:"m-1 ",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 cursor-pointer",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),(0,l.jsxs)("ul",{style:{borderRadius:"10px"},className:"p-2 shadow menu dropdown-content z-[1]  \n                  ".concat("dark"==theme?"bg-black text-white border-[#121212] border-2":"bg-white text-black","\n                  rounded-box w-52"),children:[e.user.id==a.h.authStore.model().id?(0,l.jsx)("li",{children:(0,l.jsx)("a",{onClick:e.deleteComment,children:"Delete"})}):null,(0,l.jsx)("li",{children:(0,l.jsx)("a",{children:"Item 2"})})]})]})]})]})]}),(0,l.jsx)("p",{className:" overflow-hidden break-words ",children:e.text})]}),(0,l.jsxs)("div",{className:"flex flex-row gap-5 ".concat(e.statusPage?"mt-2  mb-5":"p-2"," "),children:[(0,l.jsxs)("div",{className:"relative flex ",style:{alignItems:"center",justifyContent:"center"},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"\n          hover:bg-rose-500 hover:rounded-full hover:bg-opacity-20   hover:p-2 hover:text-[#f57288]\n          focus:bg-rose-500 focus:rounded-full focus:bg-opacity-20   focus:p-2 focus:text-[#f57288]\n           w-6 h-6 cursor-pointer ".concat(n.includes(a.h.authStore.model().id)?"fill-rose-500 text-rose-500":"  text-gray","\n          "),onClick:d,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),n.length>0?(0,l.jsx)("p",{className:"mx-2",children:n.length}):""]}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"})}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6 cursor-pointer",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})]}),e.isUserReplyPage||e.statusPage?"":(0,l.jsx)("p",{onClick:()=>{e.mentions.includes(e.user.username)||(e.setComment((null==e?void 0:e.comment)+"@".concat(e.user.username," ")),e.setMentions([...null==e?void 0:e.mentions,e.user.username]))},className:"mx-2 text-sm cursor-pointer",children:"Reply"})]})}},7494:function(e,s,t){t.d(s,{Z:function(){return o}});var l=t(5893);function o(e){return(0,l.jsx)("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",fill:e.fill||"none",viewBox:"0 0 24 24",strokeWidth:e.width||"1.5",stroke:e.stroke||"currentColor",className:e.className,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})})}},2506:function(e,s,t){t.d(s,{Z:function(){return u}});var l=t(5893),o=t(7294),a=t(3257),r=t(3054),n=t(2545);function i(e){var s,t;let[a,i]=(0,o.useState)(""),[d,c]=(0,o.useState)([]);async function h(){if(!0==a.length<1);else try{let s=n.h.authStore.model();delete s.token,n.h.create({collection:"comments",record:{user:n.h.authStore.model().id,text:a,post:e.post.id,likes:[]},expand:["user"]}).then(async s=>{let t=[...e.comments,s];await n.h.update({collection:"posts",cacheKey:e.cacheKey,id:e.post.id,immediatelyUpdate:!0,record:{expand:{comments:t,author:e.post.expand.author},comments:[...e.comments.map(e=>e.id),s.id]}}),e.setComments(t)})}catch(e){console.log(e);return}}return(0,l.jsx)("dialog",{id:e.id,className:"   fixed top-0 left-0 w-full sm:modal placeholder: xl:rounded-xl  m-auto   right-16  h-[80vh] f md:mt-5  md:rounded-xl  md:w-[40vw] xl:w-[30vw]    \n          ".concat("dark"==theme?"bg-black text-white border-[#121212] border-2":"bg-white text-black","\n          "),children:(0,l.jsxs)("div",{className:"   xl:rounded-xl \n          ".concat("dark"==theme?"bg-black text-white border-[#121212] border-2":"bg-white text-black","\n          scroll h-full w-full  shadow-none   "),children:[(0,l.jsx)("div",{className:"flex flex-col   p-3 w-full  ",children:(0,l.jsxs)("div",{className:"flex flex-row w-full justify-between absolute p-2    xl:p-6  z-[999] top-0 left-0   ".concat("dark"==theme?"bg-black text-white":"bg-white text-black","  "),children:[(0,l.jsx)("button",{className:"btn btn-circle focus:outline-none btn-ghost btn-sm bg-none hover:bg-base-200",onClick:()=>{var s;null===(s=document.getElementById(e.id))||void 0===s||s.close()},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10Z",clipRule:"evenodd"})})}),(0,l.jsx)("div",{children:"Comments"}),(0,l.jsx)("div",{})]})}),(0,l.jsx)("div",{className:"flex flex-col lg:mb-32 md:mb-32 xl:mb-32   mt-8  p-4 \n          ".concat(d.length>0?"sm:mb-64":"","\n          sm:p-2 gap-5"),children:e.comments.length>0?e.comments.map((s,t)=>(0,l.jsx)("div",{style:{borderTop:"dark"==theme?"1px solid #121212":"1px solid #f9f9f9"},children:(0,l.jsx)(r.Z,{isLast:t==e.comments.length-1,id:s.id,expand:s.expand,comments:e.comments,level:1,likes:s.likes,post:e.post,text:s.text,created:s.created,user:s.expand.user,setParams:e.setParams,setComment:i,comment:a,setMentions:c,mentions:d,swapPage:e.swapPage,updateCache:e.updateCache,deleteComment:()=>{e.setComments(e.comments.filter(e=>e.id!=s.id)),e.updateCache(e.post.id,{...e.post,expand:{...e.post.expand,comments:e.comments.filter(e=>e.id!=s.id)}}),n.h.delete({collection:"comments",id:s.id,cacheKey:e.cacheKey})}},s.id)})):(0,l.jsxs)("div",{className:"mx-auto justify-center w-full flex mt-2 hero flex-col",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-center",children:"No Comments \uD83D\uDE22"}),(0,l.jsx)("p",{className:"text-gray-500 text-sm  text-center prose   w-[300px] break-normal mt-6   ",children:"Be the first to comment on this post."})]})}),(0,l.jsxs)("div",{className:"flex flex-col  gap-5 w-full absolute    bottom-0   left-0   p-2  \n               ".concat("dark"==theme?"bg-black text-white":"bg-white text-black","\n          \n          ").concat(d.length>0?"sm:mt-32":"","\n          "),children:[d.length>0?(0,l.jsx)("div",{className:"flex gap-5 justify-start  p-2",children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{children:"Mentions"}),(0,l.jsx)("div",{className:"flex gap-5 mt-2",children:d.length>0?d.map(e=>(0,l.jsx)("p",{onClick:()=>{},className:"text-sm  btn rounded-full btn-sm text-sky-500",children:e})):""})]})}):"",(0,l.jsxs)("div",{className:"flex flex-row  xl:hidden justify-between w-full  p-2 text-xl",children:[(0,l.jsx)("p",{onClick:()=>{i(a+"❤️")},children:"❤️"}),(0,l.jsx)("p",{onClick:()=>{i(a+"\uD83D\uDD25")},children:"\uD83D\uDD25"}),(0,l.jsx)("p",{onClick:()=>{i(a+"\uD83E\uDD74")},children:"\uD83E\uDD74"}),(0,l.jsx)("p",{onClick:()=>{i(a+"\uD83D\uDC4F")},children:"\uD83D\uDC4F"}),(0,l.jsx)("p",{onClick:()=>{i(a+"\uD83D\uDC31‍\uD83D\uDCBB")},children:"\uD83D\uDC31‍\uD83D\uDCBB"}),(0,l.jsx)("p",{onClick:()=>{i(a+"\uD83D\uDC40")},children:"\uD83D\uDC40"}),(0,l.jsx)("p",{onClick:()=>{i(a+"\uD83D\uDE02")},children:"\uD83D\uDE02"})]}),(0,l.jsx)("div",{className:"flex flex-row gap-5  sm:mb-5 mb-2 w-full items-center",children:(0,l.jsxs)("div",{className:"relative rounded  w-full  ",children:[(0,l.jsx)("input",{className:"   input justify-start  hero    \n                     ".concat("dark"==theme?"border-1 border-[#121212]":"border-slate-200 border  border-l-full","\n                      w-full rounded-full line-clamp-1  resize-none  focus:outline-none  \n                  text-sm  \n                  "),placeholder:"Reply to ".concat(null===(t=e.post.expand)||void 0===t?void 0:null===(s=t.author)||void 0===s?void 0:s.username),onChange:e=>{i(e.target.value);let s=e.target.value.match(/@\w+/g);s?c(s):c([])},value:a}),(0,l.jsx)("button",{className:"btn  \n                  ".concat("dark"==theme?"bg-black hover:bg-black border-[#121212]":"bg-white hover:bg-white border-slate-200","\n                  border-start-0 rounded-full border-l-transparent border  rounded-l-none  absolute end-0 top-0 h-full  border-l-0 "),children:a.length>0?(0,l.jsx)("p",{className:"text-sky-500",onClick:()=>{h()},children:"Post"}):(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 8.25v7.5m6-7.5h-3V12m0 0v3.75m0-3.75H18M9.75 9.348c-1.03-1.464-2.698-1.464-3.728 0-1.03 1.465-1.03 3.84 0 5.304 1.03 1.464 2.699 1.464 3.728 0V12h-1.5M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})})})]})})]})]})})}function d(e){return(0,l.jsx)("dialog",{id:e.id+"delete",className:"  dialog sm:modal xl:shadow-none md:shadow-none lg:shadow-none bg-transparent focus:outline-none rounded    ",children:(0,l.jsxs)("div",{style:{border:"dark"==theme?"1px solid #2d2d2d":"1px solid #f9f9f9",background:"dark"==theme?"#121212":"#f8f7f7",borderRadius:"10px"},className:"modal-box xl:shadow-none lg:shadow-none md:shadow-none rounded bg-transparent",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:"Delete Post ?"}),(0,l.jsx)("p",{className:"py-4",children:"Are you sure you want to delete this post? This action cannot be undone. This will permanently delete access accross the platform."}),(0,l.jsx)("div",{className:"modal-action gap-5",children:(0,l.jsxs)("form",{method:"dialog",className:"flex gap-5",children:[(0,l.jsx)("button",{className:"text-red-500",onClick:()=>{var s;n.h.delete({collection:"posts",id:e.id,cacheKey:e.cacheKey}),e.setArray(e.array.filter(s=>s.id!=e.id)),null===(s=document.getElementById(e.id+"delete"))||void 0===s||s.close()},children:"Delete"}),(0,l.jsx)("button",{className:" ","data-close":!0,children:"Cancel"})]})})]})})}var c=t(7494);function h(e){return(0,l.jsx)("div",{className:"    p-2 ",onClick:()=>{window.setPostModalParams({...e,type:"repost"})},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"   hover:rounded-full hover:bg-green-400 hover:bg-opacity-20   hover:text-green-600 cursor-pointer p-1 w-8 h-8 ",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"})})})}let m=e=>{let s=new Date(e),t=(new Date().getTime()-s.getTime())/1e3,l=t/60,o=l/60,a=o/24,r=a/7,n=r/4,i=n/12;switch(!0){case t<60:return"".concat(Math.floor(t),"s");case l<60:return"".concat(Math.floor(l),"m");case o<24:return"".concat(Math.floor(o),"h");case a<7:return"".concat(Math.floor(a),"d");case r<4:return"".concat(Math.floor(r),"w");case n<12:return"".concat(Math.floor(n),"mo");case i>1:return"".concat(Math.floor(i),"y")}};function u(e){var s,t,r,x,p,w,f,v,g,j,b,k,N,y,C,M,S,L,P,D,B,A,Z;let[z,E]=(0,o.useState)(e.likes),[K,V]=(0,o.useState)((null===(s=e.expand)||void 0===s?void 0:s.comments)||[]),[I,W]=(0,o.useState)(""),[H,R]=(0,o.useState)(!1),[T,U]=(0,o.useState)(!!n.h.authStore.model().bookmarks.includes(e.id));async function F(){!0===z.includes(n.h.authStore.model().id)?(E(z.filter(e=>e!=n.h.authStore.model().id)),await n.h.update({collection:"posts",cacheKey:e.cacheKey,expand:["author","likes","comments","comments.user"],id:e.id,record:{likes:z.filter(e=>e!=n.h.authStore.model().id)}})):(E([...z,n.h.authStore.model().id]),await n.h.update({collection:"posts",cacheKey:e.cacheKey,expand:["author","likes","comments","comments.user"],id:e.id,record:{likes:[...z,n.h.authStore.model().id]}}))}return(0,o.useRef)(!1),(0,l.jsxs)("div",{id:e.id,...e.notInteractable&&{onClick:()=>{if(!e.isCreating){let s=Object.assign({},e);s.notInteractable=!1,e.setParams({post:s,type:"posts"}),e.swapPage("view"),window.history.pushState({},"","/?view=status&id="+e.id+"&type=posts")}}},className:"xl:mt-0 w-full h-fit  relative  xl:p-3 \n        ".concat("dark"==theme?"text-white":"text-black","\n        ").concat(e.notInteractable&&e.isCreating?"dark"==theme?"border rounded-md border-[#2d2d2d]":"border-[#f9f9f9] rounded-md cursor-pointer":"","\n        xl:p-0\n        p-2\n        xl:mb-0 mb-6\n        ").concat(e.isLast?"mb-[7rem]":"","\n        ").concat("user"!==e.page&&"bookmarks"!==e.page&&"home"!==e.page?"xl:p-5  ":"home"==e.page?"xl:p-5  ":""),children:[e.pinned&&"user"==e.page&&e.params.user==e.author?(0,l.jsxs)("div",{className:"flex hero   gap-5 mb-5",children:[(0,l.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"w-4 h-4\n              ".concat("dark"==theme?"fill-white":"fill-black","\n        "),children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M7 4.5C7 3.12 8.12 2 9.5 2h5C15.88 2 17 3.12 17 4.5v5.26L20.12 16H13v5l-1 2-1-2v-5H3.88L7 9.76V4.5z"})})}),"Pinned"]}):"",(0,l.jsxs)("div",{className:"flex   justify-between",children:[(0,l.jsx)(i,{id:e.id+"comments",comments:K,post:e,setComments:V,cacheKey:e.cacheKey,setParams:e.setParams,swapPage:e.swapPage,updateCache:e.updateCache}),(0,l.jsxs)("div",{className:"flex flex-row  gap-2   ",children:[(null===(t=e.expand)||void 0===t?void 0:t.author.avatar)?(0,l.jsx)("img",{onClick:()=>{e.setParams({user:e.author}),e.swapPage("user")},src:n.h.cdn.url({collection:"users",file:null===(r=e.expand.author)||void 0===r?void 0:r.avatar,id:null===(x=e.expand.author)||void 0===x?void 0:x.id}),alt:"profile",className:"rounded object-cover w-12 h-12 cursor-pointer"}):(0,l.jsx)("div",{className:"avatar placeholder",children:(0,l.jsx)("div",{onClick:()=>{e.setParams({user:e.author}),e.swapPage("user")},className:"bg-base-200 text-black rounded w-12 h-12 avatar cursor-pointer   ",children:(0,l.jsx)("span",{className:"text-2xl",children:null===(p=e.expand.author)||void 0===p?void 0:p.username.charAt(0).toUpperCase()})})}),(0,l.jsx)("div",{className:"flex flex-col   heros",children:(0,l.jsxs)("div",{className:"flex flex-row h-0 mt-2 gap-2 hero",children:[(0,l.jsx)("p",{onClick:()=>{e.setParams({user:e.author}),e.swapPage("user")},children:(0,l.jsx)("span",{className:"capitalize font-bold cursor-pointer",children:null===(w=e.expand.author)||void 0===w?void 0:w.username})}),(0,l.jsxs)("p",{className:"hover:underline opacity-50 text-sm md:hidden sm:hidden ",children:["@",null===(f=e.expand.author)||void 0===f?void 0:f.username]}),(null===(v=e.expand.author)||void 0===v?void 0:v.validVerified)?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 fill-blue-500 text-white h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}):"",(null===(g=e.expand.author)||void 0===g?void 0:g.isDeveloper)?(0,l.jsx)("div",{className:"tooltip    rounded tooltip-left","data-tip":"Postr Developer",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4   h-4",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})})}):"",(null===(j=e.expand.author)||void 0===j?void 0:j.postr_plus)?(0,l.jsx)("div",{className:"tooltip tooltip-middle cursor-pointer","data-tip":"Subscriber since ".concat(new Date(null===(b=e.expand.author)||void 0===b?void 0:b.plus_subscriber_since).toLocaleDateString()),children:(0,l.jsx)("span",{className:"badge badge-outline badge-sm rounded-full  border-blue-500 z-[-1] text-sky-500",children:"Postr+ Sub"})}):"","\xb7",(0,l.jsx)("span",{className:"text-sm",children:m(e.created)}),!e.notInteractable&&(0,l.jsx)("div",{className:"flex gap-2   absolute end-2 ",children:(0,l.jsxs)("div",{className:"dropdown dropdown-left",children:[(0,l.jsx)("div",{tabIndex:0,role:"button",className:"m-1",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})})}),(0,l.jsxs)("ul",{tabIndex:0,style:{borderRadius:"10px",border:"dark"==theme?"1px solid #2d2d2d":"1px solid #f9f9f9"},className:"dropdown-content menu bg-base-100 rounded-box font-bold z-[1] w-64 p-2 shadow-xl",children:[(null===(k=e.expand)||void 0===k?void 0:k.author)&&e.expand.author.id==n.h.authStore.model().id?(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-red-500 flex hero gap-2",onClick:()=>{var s;null===(s=document.getElementById(e.id+"delete"))||void 0===s||s.showModal()},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]})}):"",(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"hero flex gap-2",onClick:()=>{var s;null===(s=document.getElementById(e.id+"embed"))||void 0===s||s.showModal()},children:[(0,l.jsx)("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})}),"Embed Post"]})}),(null===(N=e.expand)||void 0===N?void 0:N.author)&&e.expand.author.id!==n.h.authStore.model().id&&(0,l.jsx)("li",{children:n.h.authStore.model().blocked.includes(e.author)?(0,l.jsxs)("a",{className:"hero flex gap-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"})}),"Unblock @",null===(S=e.expand)||void 0===S?void 0:null===(M=S.author)||void 0===M?void 0:M.username]}):(0,l.jsxs)("a",{className:"hero flex gap-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"})}),"Block @",null===(C=e.expand)||void 0===C?void 0:null===(y=C.author)||void 0===y?void 0:y.username]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"hero flex gap-2",children:[(0,l.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",className:"cursor-pointer   w-4 h-4  ",children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M8.75 21V3h2v18h-2zM18 21V8.5h2V21h-2zM4 21l.004-10h2L6 21H4zm9.248 0v-7h2v7h-2z"})})}),"View Post Engagement"]})}),(null===(L=e.expand)||void 0===L?void 0:L.author)&&e.expand.author.id==n.h.authStore.model().id?(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"hero flex gap-2",onClick:()=>{e.pin(e.id)},children:[(0,l.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",className:"w-4 h-4  ",children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M7 4.5C7 3.12 8.12 2 9.5 2h5C15.88 2 17 3.12 17 4.5v5.26L20.12 16H13v5l-1 2-1-2v-5H3.88L7 9.76V4.5z"})})}),e.pinned?"Unpin":"Pin"]})}):"",(null===(P=e.expand)||void 0===P?void 0:P.author)&&e.expand.author.id==n.h.authStore.model().id&&(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"hero flex gap-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"})}),"Who can reply"]})})]})]})})]})})]})]}),(0,l.jsxs)("div",{className:"mt-3 mb-4 ",children:[(0,l.jsx)("p",{style:{cursor:"pointer"},onClick:()=>{e.notInteractable||(e.setParams({post:e,type:"posts"}),e.swapPage("view"),window.history.pushState({},"","/?view=status&id="+e.id+"&type=posts"))},className:"mt-2",ref:s=>{s&&e.content&&(s.innerHTML=e.content)}}),e.isRepost&&(0,l.jsx)("div",{className:"".concat("dark"==theme?"mt-2 border border-[#2d2d2d] rounded-md":"border border-[#f9f9f9] rounded-md"),children:(0,l.jsx)(u,{notInteractable:!0,id:null===(B=e.expand)||void 0===B?void 0:null===(D=B.repost)||void 0===D?void 0:D.id,...e.expand.repost,setParams:e.setParams,swapPage:e.swapPage})}),e.file.length>0?(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("div",{className:" w-full \n           ".concat(e.file.length>2?"grid grid-cols-2 gap-2":e.file.length>1?"grid grid-cols-2 gap-2":"","\n            col-span-2 grid-flow-dense  "),children:e.file.map((s,t)=>(0,l.jsx)("img",{onClick:()=>{var s;null===(s=document.getElementById(e.id+"imageViewer"+t))||void 0===s||s.showModal()},className:" w-full object-cover\n    \n                    ".concat(e.file.length<2?"rounded  h-96":"border h-64     border-[#f9f9f9]  rounded","\n                    \n                     ").concat(e.file.length>2&&t==e.file.length-1?"col-span-2":"","\n                     \n                    \n                    "),src:n.h.cdn.url({id:e.id||e.params.id,collection:"posts",file:s}),alt:"image"}))})}):"",!e.notInteractable&&(0,l.jsxs)("div",{className:"flex    mt-5",children:[(0,l.jsxs)("div",{className:"w-fit flex gap-2  hero",children:[(0,l.jsx)("input",{type:"checkbox",className:"toggle toggle-accent",switch:!0,hidden:!0,name:"likebtn",onChange:()=>{console.log("clicked")}}),(0,l.jsx)("label",{htmlFor:"likebtn",className:"cursor-pointer",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"\n              hover:rounded-full hover:bg-rose-500 hover:bg-opacity-20 hover:p-2   active:p-1  w-6 h-6 hover:text-rose-500\n              cursor-pointer ".concat(z.includes(n.h.authStore.model().id)?"fill-rose-500 text-rose-500":""),onClick:e=>{console.log("clicked"),F()},children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})})}),z.length]}),(0,l.jsxs)("div",{className:"flex gap-2 hero  p-2 w-fit ",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20 p-1   w-8 h-8 hover:text-sky-500  ",onClick:()=>{var s;null===(s=document.getElementById(e.id+"comments"))||void 0===s||s.showModal()},children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"})}),K.length]}),(0,l.jsx)(h,{originalAuthor:null===(Z=e.expand)||void 0===Z?void 0:null===(A=Z.author)||void 0===A?void 0:A.username,originalPostID:e.id,cacheKey:e.cacheKey,post:e}),(0,l.jsx)("span",{className:"tooltip tooltip-bottom","data-tip":"Post Views",children:(0,l.jsxs)("div",{className:"w-fit p-2 hero flex",children:[(0,l.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20  p-1  w-7 h-7 hover:p-2 hover:text-sky-500\n                  ".concat("dark"==theme?"fill-white":"fill-black","\n                  "),children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M8.75 21V3h2v18h-2zM18 21V8.5h2V21h-2zM4 21l.004-10h2L6 21H4zm9.248 0v-7h2v7h-2z"})})}),(0,l.jsx)("span",{children:e.views.length})]})}),(0,l.jsxs)("div",{className:"absolute end-5 flex  gap-2",children:[(0,l.jsx)("div",{className:"w-fit p-2 hero flex",children:(0,l.jsx)("span",{className:"tooltip tooltip-bottom","data-tip":"share",children:(0,l.jsx)("svg",{onClick:()=>{navigator.share({title:e.expand.author.username+" on Postr ",text:e.content.slice(0,100),url:"https://embedify-v1.vercel.app/embed/posts/".concat(e.id,"/meta")})},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20  p-1 w-7   h-7 hover:text-sky-500",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})})}),(0,l.jsx)("div",{className:"w-fit p-2 hero flex",children:(0,l.jsx)(c.Z,{id:e.id,className:"\n              cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20  p-1  w-7 h-7 hover:p-2 hover:text-sky-500\n              ".concat(T?"fill-blue-500 text-blue-500":""),onClick:()=>{T?(n.h.update({collection:"users",cacheKey:"users-".concat(n.h.authStore.model().id),id:n.h.authStore.model().id,record:{bookmarks:n.h.authStore.model().bookmarks.filter(s=>s!=e.id)}}),n.h.update({collection:"posts",cacheKey:e.cacheKey,invalidateCache:["bookmarks-"+n.h.authStore.model().id],id:e.id,record:{bookmarks:n.h.authStore.model().bookmarks.filter(s=>s!=e.id)}}),n.h.authStore.update(),U(!1),e.deleteBookmark&&e.deleteBookmark()):(n.h.update({collection:"users",cacheKey:"users-".concat(n.h.authStore.model().id),id:n.h.authStore.model().id,record:{bookmarks:[...n.h.authStore.model().bookmarks,e.id]}}),n.h.update({collection:"posts",cacheKey:e.cacheKey,invalidateCache:["bookmarks-"+n.h.authStore.model().id],id:e.id,record:{bookmarks:[...n.h.authStore.model().bookmarks,e.id]}}),n.h.authStore.update(),U(!0))}})})]})]})]}),e.file?e.file.map((s,t)=>(0,l.jsx)(a.Z,{id:e.id+"imageViewer"+t,height:"h-[100vw]",width:"w-[100vw]",children:(0,l.jsxs)("div",{className:"flex flex-col overflow-hidden justify-center items-center    relative  ",children:[(0,l.jsx)("svg",{onClick:()=>{var s;null===(s=document.getElementById(e.id+"imageViewer"+t))||void 0===s||s.close()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"  bg-base-200 btn btn-sm btn-circle fixed left-2 top-2",children:(0,l.jsx)("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})}),(0,l.jsx)("img",{src:n.h.cdn.url({id:e.id||e.params.id,collection:"posts",file:s}),alt:e.file,className:"object-cover  cursor-pointer"})]})})):null,(0,l.jsx)(d,{id:e.id,...e}),(0,l.jsxs)("dialog",{id:e.id+"embed",className:"dialog sm:modal xl:shadow-none md:shadow-none lg:shadow-none bg-transparent focus:outline-none",children:[(0,l.jsxs)("div",{className:"modal-box xl:shadow-none lg:shadow-none md:shadow-none",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:"Embed Post"}),(0,l.jsx)("p",{className:"py-4",children:"Embed this post on your website or blog by copying the code below."}),(0,l.jsx)("div",{className:"modal-action gap-5",children:(0,l.jsxs)("div",{className:"flex gap-5 justify-start  p-2",children:[(0,l.jsx)("input",{type:"text",className:"w-full p-2 rounded bg-base-200",value:'<iframe src="'.concat(window.location.origin,"/embed/").concat(e.id,'" width="100%" height="100%" frameborder="0"></iframe>')}),(0,l.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>{navigator.clipboard.writeText('<iframe src="'.concat(window.location.origin,"/embed/").concat(e.id,'" width="100%" height="100%" frameborder="0"></iframe>'))},children:"Copy"})]})})]}),(0,l.jsxs)("form",{method:"dialog",className:"flex gap-5",children:[(0,l.jsx)("textarea",{className:"w-full p-2 rounded bg-base-200",rows:5,value:'<iframe src="'.concat(window.location.origin,"/embed/").concat(e.id,'" width="100%" height="100%" frameborder="0"></iframe>')}),(0,l.jsx)("button",{className:" ","data-close":!0,children:"Close"})]})]})]},e.id)}}}]);