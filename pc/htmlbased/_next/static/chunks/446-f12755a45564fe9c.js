"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{3446:function(e,s,a){a.d(s,{h:function(){return n},k:function(){return o}});var l=a(5893),r=a(7294),t=a(8703);function n(e){var s,a;let[n,o]=(0,r.useState)(""),[i,c]=(0,r.useState)([]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"xl:drawer   xl:w-[auto] xl:drawer-end xl:drawer-open lg:drawer-open   ",children:[(0,l.jsx)("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),(0,l.jsxs)("div",{className:"drawer-side",children:[(0,l.jsx)("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),(0,l.jsx)("ul",{className:"p-4  w-80  min-h-full   text-base-content",children:(0,l.jsxs)("li",{className:"flex flex-col gap-5 text-sm",children:[t.h.authStore.model().postr_plus?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:" bg-base-200 w-full rounded  menu text-md",children:[(0,l.jsxs)("p",{children:["Subscribe to"," ",(0,l.jsx)("span",{className:"from-blue-500 to-purple-500 bg-gradient-to-r text-white text-transparent bg-clip-text font-bold",children:"Postr ++"}),(0,l.jsx)("p",{children:"Become a supporter and unlock exclusive benefits"})]}),(0,l.jsx)("button",{className:"btn btn-primary btn-sm rounded-full  mt-2 w-[50%]",children:"Subscribe"})]})}),(0,l.jsxs)("li",{className:"flex flex-row gap-5",children:[(0,l.jsx)("a",{className:"cursor-pointer hover:underline",children:"Terms of service"}),(0,l.jsx)("a",{href:"/information/privacy.pdf",className:"cursor-pointer hover:underline",children:"Privacy Policy"})]}),(0,l.jsxs)("li",{className:"flex flex-row gap-5",children:[(0,l.jsx)("a",{href:"",className:"cursor-pointer hover:underline",children:"Help and safety"}),(0,l.jsx)("a",{className:"cursor-pointer hover:underline",children:"Accessibility"})]}),(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"tooltip cursor-pointer","data-tip":"Your app version",children:["pkg version: ",null===(a=window)||void 0===a?void 0:null===(s=a.postr)||void 0===s?void 0:s.version]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{children:["\xa9 ",new Date().getFullYear()," Pascal. All rights reserved"]})})]})})]})]})})}function o(e){let[s,a]=(0,r.useState)([]),[n,o]=(0,r.useState)(""),[i,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)([]);async function u(){let l={message:"",id:""};switch(s.length>0&&(s=s.map(async e=>{if(e.size>18e5){l.message="One or more of your images are too large",l.id=e.name,s=s.filter(e=>e.name!==l.id);return}return{name:e.name,type:e.type,size:e.size,data:await t.h.getAsByteArray(new Blob([e],{type:e.type}))}})),!0){case n.length<1:c({message:"You must enter some text"}),setTimeout(()=>{c(!1)},3e3);return;case s.length>4:alert("You can only upload 4 images");return;default:try{var r;h(!0);let l=await t.h.create({collection:"posts",expand:["author"],record:{author:t.h.authStore.model().id,content:n,file:{isFile:!0,file:await Promise.all(s)},comments:[],likes:[]}});e.setParams({user:t.h.authStore.model().id,scrollTo:null==l?void 0:l.id}),e.swapPage("user"),a([]),o(""),null===(r=document.getElementById("createPost"))||void 0===r||r.close(),h(!1)}catch(e){}}}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"xl:drawer xl:w-[auto]      xl:drawer-open lg:drawer-open  ",children:[(0,l.jsx)("input",{id:"my-drawer-3",type:"checkbox",className:"drawer-toggle"}),i?(0,l.jsx)("div",{className:"toast toast-end",children:(0,l.jsxs)("div",{className:"alert bg-red-500 bg-opacity-20",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"text-rose-500 w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),(0,l.jsx)("span",{children:i.message})]})}):"",(0,l.jsxs)("div",{className:"drawer-side",children:[(0,l.jsx)("label",{htmlFor:"my-drawer-3","aria-label":"close sidebar",className:"drawer-overlay"}),(0,l.jsxs)("ul",{className:"menu p-2  w-64  flex flex-col gap-5 min-h-full  text-base-content",children:[(0,l.jsx)("li",{className:"hover:bg-transparent",children:(0,l.jsx)("a",{className:"hover:bg-transparent focus:bg-transparent",children:(0,l.jsx)("img",{src:"/icons/icon-blue.jpg",className:"rounded",width:40,height:40})})}),(0,l.jsx)("li",{className:"",children:(0,l.jsxs)("a",{className:"text-xl  ".concat("home"==e.currentPage?"font-semibold text-blue-500":""),onClick:()=>{e.swapPage("home")},children:[(0,l.jsx)("svg",{className:"\n                     w-7 h-7\n                     cursor-pointer\n                      ".concat("home"==e.currentPage?"fill-blue-500":"fill-white stroke-black ","\n                     "),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:1.5,id:"home",children:(0,l.jsx)("path",{d:"M6.63477851,18.7733424 L6.63477851,15.7156161 C6.63477851,14.9350667 7.27217143,14.3023065 8.05843544,14.3023065 L10.9326107,14.3023065 C11.310188,14.3023065 11.6723007,14.4512083 11.9392882,14.7162553 C12.2062757,14.9813022 12.3562677,15.3407831 12.3562677,15.7156161 L12.3562677,18.7733424 C12.3538816,19.0978491 12.4820659,19.4098788 12.7123708,19.6401787 C12.9426757,19.8704786 13.2560494,20 13.5829406,20 L15.5438266,20 C16.4596364,20.0023499 17.3387522,19.6428442 17.9871692,19.0008077 C18.6355861,18.3587712 19,17.4869804 19,16.5778238 L19,7.86685918 C19,7.13246047 18.6720694,6.43584231 18.1046183,5.96466895 L11.4340245,0.675869015 C10.2736604,-0.251438297 8.61111277,-0.221497907 7.48539114,0.74697893 L0.967012253,5.96466895 C0.37274068,6.42195254 0.0175522924,7.12063643 0,7.86685918 L0,16.568935 C0,18.4638535 1.54738155,20 3.45617342,20 L5.37229029,20 C6.05122667,20 6.60299723,19.4562152 6.60791706,18.7822311 L6.63477851,18.7733424 Z",transform:"translate(2.5 2)"})}),"Home"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-lg",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"      w-7 h-7   cursor-pointer     hover:fill-black hover:text-black         ",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),"Notifications"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-lg",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"   w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),"Explore"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-xl\n                  ".concat("user"==e.currentPage&&e.params.user.username==t.h.authStore.model().username?"font-semibold text-blue-500":"","\n                  "),onClick:()=>{e.setParams({user:t.h.authStore.model().id}),e.swapPage("user")},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"\n                   w-7 h-7\n                   ".concat("user"==e.currentPage&&e.params.user.username==t.h.authStore.model().username?"fill-blue-500":"","\n                  "),children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),"Profile"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"text-lg",onClick:()=>{e.swapPage("collections")},children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M6 4.75A.75.75 0 0 1 6.75 4h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 4.75ZM6 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 10Zm0 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM1.99 4.75a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 15.25a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 10a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1V10Z",clipRule:"evenodd"})}),"Collections"]})}),(0,l.jsx)("li",{className:"text-lg  text-start hover:outline-none  hover:text-lg  hover:justify-start hover:rounded-full",children:(0,l.jsxs)("a",{children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),"Messages"]})}),(0,l.jsx)("button",{onClick:()=>{document.getElementById("createPost").showModal()},className:"btn rounded-full  text-lg hero btn-ghost  hover:bg-blue-500 focus:bg-blue-500 bg-blue-500 text-white ",children:(0,l.jsx)("p",{children:"Post"})})]})]})]}),(0,l.jsx)("dialog",{id:"createPost",className:"sm:modal  sm:modal-middle   p-5  xl:w-[25vw] rounded-box",children:(0,l.jsxs)("div",{className:"sm:modal-box ",children:[(0,l.jsxs)("div",{className:"flex hero justify-between",children:[(0,l.jsx)("p",{className:"cursor-pointer hover:text-red-500",onClick:()=>{var e;null===(e=document.getElementById("createPost"))||void 0===e||e.close()},children:"Cancel"}),(0,l.jsx)("button",{className:"text-blue-500 text-md focus:outline-none",children:"Drafts"})]}),(0,l.jsxs)("div",{className:" py-4 flex flex-col \n          ".concat(s.length>0?n.lenght/140>1?"h-96":"h-100":"h-32","\n          ;\n\n\n\n\n          "),style:{height:n.length>0?"auto":" "},children:[(0,l.jsxs)("div",{className:"flex flex-row      ",children:[t.h.authStore.model().avatar?(0,l.jsx)("img",{src:t.h.authStore.img(),className:"w-10 h-10 rounded-full object-cover"}):(0,l.jsx)("div",{className:"avatar placeholder",children:(0,l.jsx)("div",{className:"bg-base-300 text-black   avatar  w-10 h-10  border cursor-pointer rounded   border-white",children:(0,l.jsx)("span",{className:"text-2xl",children:t.h.authStore.model().username.charAt(0).toUpperCase()})})}),(0,l.jsx)("div",{className:"flex  flex-col w-full",children:(0,l.jsx)("textarea",{className:"w-full mt-2 mx-3 \n              focus:outline  \n              h-32 overflow-y-hidden\n              resize-none outline-none",placeholder:"What's happening?",onChange:e=>{o(e.target.value)},maxLength:140})})]}),(0,l.jsx)("div",{className:"scroll overflow-y-hidden",children:s.length>0&&(0,l.jsx)("div",{className:"sm:grid sm:grid-cols-2 flex flex-row flex-wrap flex-grow gap-2",children:Object.keys(s).map(e=>(console.log(m),m.find(a=>a.id==s[e].name),(0,l.jsxs)("div",{className:"relative  w-32 h-32 ",children:[(0,l.jsx)("img",{src:URL.createObjectURL(s[e]),className:" object-cover w-32 h-32 rounded-md\n                            xl:col-span-2 sm:col-span-1\n                            ".concat(m.find(a=>a.id==s[e].name)?"border-2 border-red-500 opacity-20":"","\n                            ")}),(0,l.jsx)("div",{onClick:()=>{a(s.filter(a=>a.name!==s[e].name))},className:"absolute btn btn-circle btn-sm top-1 right-1",children:"X"}),m.find(a=>a.id==s[e].name)?(0,l.jsx)("p",{ref:a=>{a&&(a.innerHTML=m.find(a=>a.id==s[e].name).message)},className:"text-red-500  absolute top-9 left-2 text-sm"}):""]})))})})]}),(0,l.jsx)("div",{className:"divider mt-0 mb-2 before:bg-[#f6f4f4] after:bg-[#fdf9f9]  after:text-slate-200"}),(0,l.jsxs)("div",{className:"flex  h-full justify-between",children:[(0,l.jsx)("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*",multiple:!0,max:4,onChange:e=>{if(Array.from(e.target.files).map(e=>{if(e.size>2e6){console.log("Too large",e.name),x(s=>[...s,{message:"\n                     Quota exceeded\n                     <br>\n                     <br>\n                    This image will not be uploaded\n                    ",id:e.name}]);return}}),e.target.files.length>4){c({message:"You can only upload 4 images"});return}a(Array.from(e.target.files)),e.target.value=""}}),(0,l.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-row gap-2",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}),(0,l.jsxs)("p",{className:"  ",children:[n.length,"/",140]}),d?(0,l.jsx)("div",{className:"loading loading-spinner text-blue-500"}):(0,l.jsx)("button",{onClick:()=>{u()},className:"btn  btn-sm rounded-full ",children:"Post"})]})]})})]})}}}]);