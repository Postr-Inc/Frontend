"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{8565:function(e,o,s){s.d(o,{L:function(){return a}});var t=s(5893),l=s(7294);function a(e){let[o,s]=(0,l.useState)("home");return window.matchMedia("(prefers-color-scheme: dark)").matches,(0,t.jsx)("div",{className:" fixed bottom-8 left-[50%] transform -translate-x-1/2    w-80 ",children:(0,t.jsxs)("ul",{className:"menu menu-horizontal rounded-box  w-fit \n    ".concat(window.matchMedia("(prefers-color-scheme: dark)").matches?"bg-darker text-white fill-white stroke-white":"bg-base-200","\n    "),children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{onClick:()=>{e.swapPage("home")},children:(0,t.jsx)("svg",{className:"\n                w-7 h-7\n                cursor-pointer\n                 \n                ",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",id:"home",children:(0,t.jsx)("path",{d:"M6.63477851,18.7733424 L6.63477851,15.7156161 C6.63477851,14.9350667 7.27217143,14.3023065 8.05843544,14.3023065 L10.9326107,14.3023065 C11.310188,14.3023065 11.6723007,14.4512083 11.9392882,14.7162553 C12.2062757,14.9813022 12.3562677,15.3407831 12.3562677,15.7156161 L12.3562677,18.7733424 C12.3538816,19.0978491 12.4820659,19.4098788 12.7123708,19.6401787 C12.9426757,19.8704786 13.2560494,20 13.5829406,20 L15.5438266,20 C16.4596364,20.0023499 17.3387522,19.6428442 17.9871692,19.0008077 C18.6355861,18.3587712 19,17.4869804 19,16.5778238 L19,7.86685918 C19,7.13246047 18.6720694,6.43584231 18.1046183,5.96466895 L11.4340245,0.675869015 C10.2736604,-0.251438297 8.61111277,-0.221497907 7.48539114,0.74697893 L0.967012253,5.96466895 C0.37274068,6.42195254 0.0175522924,7.12063643 0,7.86685918 L0,16.568935 C0,18.4638535 1.54738155,20 3.45617342,20 L5.37229029,20 C6.05122667,20 6.60299723,19.4562152 6.60791706,18.7822311 L6.63477851,18.7733424 Z",transform:"translate(2.5 2)"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:(0,t.jsx)("svg",{className:" w-7 h-7 cursor-pointer text-gray-500  hover:text-black  ",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:" w-7 h-7 cursor-pointer text-gray-500  hover:text-black  ",onClick:()=>{document.getElementById("createPost").showModal()},children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:" w-7 h-7 cursor-pointer text-gray-500  hover:fill-black hover:text-black   ",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:" w-7 h-7",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})})})})]})})}},3257:function(e,o,s){s.d(o,{Z:function(){return l}});var t=s(5893);function l(e){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("dialog",{id:e.id,className:"sm:modal    xl:rounded-box  \n              \n              ",children:(0,t.jsx)("div",{style:{width:e.width,height:e.height},className:"  bg-base-100     shadow-none  \n                  ".concat(e.className,"\n                "),children:e.children})})})}},3054:function(e,o,s){s.d(o,{Z:function(){return Comment}});var t=s(5893),l=s(7294),a=s(8703);function Comment(e){var o,s,r;let[n,i]=(0,l.useState)([e.likes]);async function d(){!0===n.includes(a.h.authStore.model().id)?(i(n.filter(e=>e!=a.h.authStore.model().id)),await a.h.update({collection:"posts",cacheKey:e.post.cacheKey,id:e.post.id,expand:["author","likes","comments","comments.user"],skipDataUpdate:!0,record:{expand:{comments:e.post.expand.comments.map(o=>o.id!=e.id?o:Array.isArray(o.likes)?{...o,likes:o.likes.filter(e=>e!=a.h.authStore.model().id)}:{...o,likes:[]}),author:e.post.expand.author}}})):(i([...n,a.h.authStore.model().id]),await a.h.update({collection:"posts",cacheKey:e.post.cacheKey,id:e.post.id,expand:["author","likes","comments","comments.user"],skipDataUpdate:!0,record:{expand:{comments:e.post.expand.comments.map(o=>o.id!=e.id?o:Array.isArray(o.likes)?{...o,likes:[...o.likes,a.h.authStore.model().id]}:{...o,likes:[a.h.authStore.model().id]}),author:e.post.expand.author}}}))}return(0,l.useEffect)(()=>{i(n.flat())},[]),(0,t.jsxs)("div",{className:"flex flex-col w-full  \n     ".concat(2==e.level?"p-5":""," \n     ").concat(e.isLast?"xl:mb-auto lg:mb-auto md:mb-auto mb-[10rem]":"","\n     ").concat(e.statusPage?"border-b-2 border-[#f8f7f7]  xl:p-5\n      hover:bg-[#f2f2f2d0]\n      ":"","\n    "),children:[(0,t.jsxs)("div",{className:"flex flex-col relative  gap-2 ".concat(e.statusPage?"":"p-2"," w-full  "),children:[(0,t.jsxs)("div",{className:"flex flex-row",children:[(0,t.jsx)("img",{src:a.h.cdn.url({id:null===(o=e.user)||void 0===o?void 0:o.id,collection:"users",file:null===(s=e.user)||void 0===s?void 0:s.avatar}),alt:"profile",className:"rounded object-cover w-12 h-12 cursor-pointer"}),(0,t.jsxs)("div",{className:"flex h-0 mt-2 mx-2 gap-2 hero ",children:[(0,t.jsx)("p",{children:null===(r=e.user)||void 0===r?void 0:r.username}),(0,t.jsxs)("p",{onClick:()=>{var o;e.setParams({user:null===(o=e.post)||void 0===o?void 0:o.expand.author}),e.swapPage("user")},className:"  text-sm opacity-60 cursor-pointer sm:hidden ",children:["@",e.expand.user.username]}),n.includes(e.post.expand.author.id)?(0,t.jsx)("div",{className:"flex  flex-row gap-2 p-2 text-sm",children:(0,t.jsxs)("div",{className:"hero flex gap-2",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.2,stroke:"currentColor",className:"w-4 h-4 fill-rose-500 stroke-rose-500",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),"by"," ",e.post.author==a.h.authStore.model().id?"you":e.post.expand.author.username]})}):null,e.expand.user.validVerified?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 fill-blue-500 text-white h-6",children:(0,t.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}):null,(0,t.jsx)("p",{children:"\xb7"}),(0,t.jsxs)("p",{className:"opacity-50 font-semibold text-sm",children:[" ",(()=>{let o=new Date(e.created),s=(new Date().getTime()-o.getTime())/1e3,t=s/60,l=t/60,a=l/24,r=a/7,n=r/4,i=n/12;switch(!0){case s<60:return"".concat(Math.floor(s),"s");case t<60:return"".concat(Math.floor(t),"m");case l<24:return"".concat(Math.floor(l),"h");case a<7:return"".concat(Math.floor(a),"d");case r<4:return"".concat(Math.floor(r),"w");case n<12:return"".concat(Math.floor(n),"mo");case i>1:return"".concat(Math.floor(i),"y")}})()]}),(0,t.jsxs)("div",{className:"justify-between flex flex-row w-full  absolute end-0",children:[(0,t.jsx)("div",{className:"flex flex-row gap-5"}),(0,t.jsxs)("details",{className:"dropdown dropdown-left",children:[(0,t.jsx)("summary",{className:"m-1 ",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 cursor-pointer",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),(0,t.jsxs)("ul",{className:"p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52",children:[e.user.id==a.h.authStore.model().id?(0,t.jsx)("li",{children:(0,t.jsx)("a",{onClick:e.deleteComment,children:"Delete"})}):null,(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:"Item 2"})})]})]})]})]})]}),(0,t.jsx)("p",{className:" overflow-hidden break-words ",children:e.text})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-5 ".concat(e.statusPage?"mt-2  mb-5":"p-2"," "),children:[(0,t.jsxs)("div",{className:"relative flex ",style:{alignItems:"center",justifyContent:"center"},children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"\n          hover:bg-rose-500 hover:rounded-full hover:bg-opacity-20   hover:p-2 hover:text-[#f57288]\n          focus:bg-rose-500 focus:rounded-full focus:bg-opacity-20   focus:p-2 focus:text-[#f57288]\n           w-6 h-6 cursor-pointer ".concat(n.includes(a.h.authStore.model().id)?"fill-rose-500 text-rose-500":"  text-gray","\n          "),onClick:d,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),n.length>0?(0,t.jsx)("p",{className:"mx-2",children:n.length}):""]}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"})}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6 cursor-pointer",children:(0,t.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})]}),e.isUserReplyPage||e.statusPage?"":(0,t.jsx)("p",{onClick:()=>{e.setComment((null==e?void 0:e.comment)+"@".concat(e.user.username," ")),e.setMentions([...null==e?void 0:e.mentions,e.user.username])},className:"mx-2 text-sm",children:"Reply"})]})}},7494:function(e,o,s){s.d(o,{Z:function(){return l}});var t=s(5893);function l(e){return(0,t.jsx)("svg",{onClick:e.onClick,xmlns:"http://www.w3.org/2000/svg",fill:e.fill||"none",viewBox:"0 0 24 24",strokeWidth:e.width||"1.5",stroke:e.stroke||"currentColor",className:e.className,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})})}},7159:function(e,o,s){s.d(o,{Z:function(){return u}});var t=s(5893),l=s(7294),a=s(3257),r=s(3054),n=s(7494),i=s(8703);function d(e){return(0,t.jsx)("div",{className:"    p-2 ",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"   hover:rounded-full hover:bg-green-400 hover:bg-opacity-20   hover:text-green-600 cursor-pointer p-1 w-8 h-8 ",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"})})})}let c=e=>{let o=new Date(e),s=(new Date().getTime()-o.getTime())/1e3,t=s/60,l=t/60,a=l/24,r=a/7,n=r/4,i=n/12;switch(!0){case s<60:return"".concat(Math.floor(s),"s");case t<60:return"".concat(Math.floor(t),"m");case l<24:return"".concat(Math.floor(l),"h");case a<7:return"".concat(Math.floor(a),"d");case r<4:return"".concat(Math.floor(r),"w");case n<12:return"".concat(Math.floor(n),"mo");case i>1:return"".concat(Math.floor(i),"y")}};function h(e){var o,s;let[a,n]=(0,l.useState)(""),[d,c]=(0,l.useState)([]);async function h(){if(!0==a.length<1);else try{let o=i.h.authStore.model();delete o.token,i.h.create({collection:"comments",record:{user:i.h.authStore.model().id,text:a,post:e.post.id,likes:[]},expand:["user"]}).then(async o=>{let s=[...e.comments,o];await i.h.update({collection:"posts",cacheKey:e.cacheKey,id:e.post.id,immediatelyUpdate:!0,record:{expand:{comments:s,author:e.post.expand.author},comments:[...e.comments.map(e=>e.id),o.id]}}),e.setComments(s)})}catch(e){console.log(e);return}}return(0,t.jsx)("dialog",{id:e.id,className:"   fixed top-0 left-0 w-full sm:modal placeholder: xl:rounded-xl  m-auto   right-16  h-[80vh] f md:mt-5  md:rounded-xl  md:w-[40vw] xl:w-[30vw]     ",children:(0,t.jsxs)("div",{className:"   xl:rounded-xl bg-base-100   scroll h-full w-full  shadow-none   ",children:[(0,t.jsx)("div",{className:"flex flex-col   p-3 w-full  ",children:(0,t.jsxs)("div",{className:"flex flex-row w-full justify-between absolute p-2    xl:p-6  z-[999] top-0 left-0   bg-white",children:[(0,t.jsx)("button",{className:"btn btn-circle focus:outline-none btn-ghost btn-sm bg-none hover:bg-base-200",onClick:()=>{var o;null===(o=document.getElementById(e.id))||void 0===o||o.close()},children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10Z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{children:"Comments"}),(0,t.jsx)("div",{})]})}),(0,t.jsx)("div",{className:"flex flex-col lg:mb-32 md:mb-32 xl:mb-32   mt-8  p-4 \n        ".concat(d.length>0?"sm:mb-64":"","\n        sm:p-2 gap-5"),children:e.comments.length>0?e.comments.map((o,s)=>(0,t.jsx)(r.Z,{isLast:s==e.comments.length-1,id:o.id,expand:o.expand,comments:e.comments,level:1,likes:o.likes,post:e.post,text:o.text,created:o.created,user:o.expand.user,setParams:e.setParams,setComment:n,comment:a,setMentions:c,mentions:d,swapPage:e.swapPage,updateCache:e.updateCache,deleteComment:()=>{e.setComments(e.comments.filter(e=>e.id!=o.id)),e.updateCache(e.post.id,{...e.post,expand:{...e.post.expand,comments:e.comments.filter(e=>e.id!=o.id)}}),i.h.delete({collection:"comments",id:o.id,cacheKey:e.cacheKey})}},o.id)):(0,t.jsxs)("div",{className:"mx-auto justify-center w-full flex mt-2 hero flex-col",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-center",children:"No Comments \uD83D\uDE22"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm  text-center prose w-[300px] break-normal mt-6 ",children:"Be the first to comment on this post."})]})}),(0,t.jsxs)("div",{className:"flex flex-col  gap-5 w-full absolute    bottom-0   left-0   p-2  bg-white  \n        \n        ".concat(d.length>0?"sm:mt-32":"","\n        "),children:[d.length>0?(0,t.jsx)("div",{className:"flex gap-5 justify-start  p-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{children:"Mentions"}),(0,t.jsx)("div",{className:"flex gap-5 mt-2",children:d.length>0?d.map(e=>(0,t.jsx)("p",{onClick:()=>{},className:"text-sm  btn rounded-full btn-sm text-sky-500",children:e})):""})]})}):"",(0,t.jsxs)("div",{className:"flex flex-row  xl:hidden justify-between w-full  p-2 text-xl",children:[(0,t.jsx)("p",{onClick:()=>{n(a+"❤️")},children:"❤️"}),(0,t.jsx)("p",{onClick:()=>{n(a+"\uD83D\uDD25")},children:"\uD83D\uDD25"}),(0,t.jsx)("p",{onClick:()=>{n(a+"\uD83E\uDD74")},children:"\uD83E\uDD74"}),(0,t.jsx)("p",{onClick:()=>{n(a+"\uD83D\uDC4F")},children:"\uD83D\uDC4F"}),(0,t.jsx)("p",{onClick:()=>{n(a+"\uD83D\uDC31‍\uD83D\uDCBB")},children:"\uD83D\uDC31‍\uD83D\uDCBB"}),(0,t.jsx)("p",{onClick:()=>{n(a+"\uD83D\uDC40")},children:"\uD83D\uDC40"}),(0,t.jsx)("p",{onClick:()=>{n(a+"\uD83D\uDE02")},children:"\uD83D\uDE02"})]}),(0,t.jsx)("div",{className:"flex flex-row gap-5  sm:mb-5 mb-2 w-full items-center",children:(0,t.jsxs)("div",{className:"relative rounded  w-full  border-slate-200 ",children:[(0,t.jsx)("input",{className:"   input justify-start  hero    border-slate-200  border  border-l-full w-full rounded-full line-clamp-1  resize-none  focus:outline-none   text-sm   ",placeholder:"Reply to ".concat(null===(s=e.post.expand)||void 0===s?void 0:null===(o=s.author)||void 0===o?void 0:o.username),onChange:e=>{n(e.target.value);let o=e.target.value.match(/@\w+/g);o?c(o):c([])},value:a}),(0,t.jsx)("button",{className:"btn  hover:bg-white  bg-white border-start-0 rounded-full border-l-transparent border  rounded-l-none border-slate-200 absolute end-0 top-0 h-full  border-l-0 ",children:a.length>0?(0,t.jsx)("p",{className:"text-sky-500",onClick:()=>{h()},children:"Post"}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 8.25v7.5m6-7.5h-3V12m0 0v3.75m0-3.75H18M9.75 9.348c-1.03-1.464-2.698-1.464-3.728 0-1.03 1.465-1.03 3.84 0 5.304 1.03 1.464 2.699 1.464 3.728 0V12h-1.5M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})})})]})})]})]})})}function m(e){return(0,t.jsx)("dialog",{id:e.id+"delete",className:"dialog sm:modal xl:shadow-none md:shadow-none lg:shadow-none bg-transparent focus:outline-none",children:(0,t.jsxs)("div",{className:"modal-box xl:shadow-none lg:shadow-none md:shadow-none",children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:"Delete Post ?"}),(0,t.jsx)("p",{className:"py-4",children:"Are you sure you want to delete this post? This action cannot be undone. This will permanently delete access accross the platform."}),(0,t.jsx)("div",{className:"modal-action gap-5",children:(0,t.jsxs)("form",{method:"dialog",className:"flex gap-5",children:[(0,t.jsx)("button",{className:"text-red-500",onClick:()=>{var o;i.h.delete({collection:"posts",id:e.id,cacheKey:e.cacheKey}),e.setArray(e.array.filter(o=>o.id!=e.id)),null===(o=document.getElementById(e.id+"delete"))||void 0===o||o.close()},children:"Delete"}),(0,t.jsx)("button",{className:" ","data-close":!0,children:"Cancel"})]})})]})})}function u(e){var o,s,r,u,x,p,v,w,f,g,j,k,b,N,C,y,M,L,D,S,B,P,A;let[K,E]=(0,l.useState)(e.likes),[z,Z]=(0,l.useState)((null===(o=e.expand)||void 0===o?void 0:o.comments)||[]),[W,V]=(0,l.useState)(""),[I,H]=(0,l.useState)(!1),[T,_]=(0,l.useState)(!!i.h.authStore.model().bookmarks.includes(e.id));async function R(){!0===K.includes(i.h.authStore.model().id)?(E(K.filter(e=>e!=i.h.authStore.model().id)),await i.h.update({collection:"posts",cacheKey:e.cacheKey,expand:["author","likes","comments","comments.user"],id:e.id,record:{likes:K.filter(e=>e!=i.h.authStore.model().id)}})):(E([...K,i.h.authStore.model().id]),await i.h.update({collection:"posts",cacheKey:e.cacheKey,expand:["author","likes","comments","comments.user"],id:e.id,record:{likes:[...K,i.h.authStore.model().id]}}))}return(0,l.useRef)(!1),(0,t.jsxs)("div",{id:e.id,className:"xl:mt-0 w-full   relative  xl:p-3  xl:mb-0 mb-6   ".concat("user"!==e.page&&"bookmarks"!==e.page&&"home"!==e.page?"xl:p-5  ":"home"==e.page?"xl:p-5  ":""),children:[e.pinned&&"user"==e.page&&e.params.user==e.author?(0,t.jsxs)("div",{className:"flex hero   gap-5 mb-5",children:[(0,t.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"w-4 h-4  ",children:(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:"M7 4.5C7 3.12 8.12 2 9.5 2h5C15.88 2 17 3.12 17 4.5v5.26L20.12 16H13v5l-1 2-1-2v-5H3.88L7 9.76V4.5z"})})}),"Pinned"]}):"",(0,t.jsxs)("div",{className:"flex   justify-between",children:[(0,t.jsx)(h,{id:e.id+"comments",comments:z,post:e,setComments:Z,cacheKey:e.cacheKey,setParams:e.setParams,swapPage:e.swapPage,updateCache:e.updateCache}),(0,t.jsxs)("div",{className:"flex flex-row  gap-2   ",children:[(null===(s=e.expand)||void 0===s?void 0:s.author.avatar)?(0,t.jsx)("img",{onClick:()=>{e.setParams({user:e.author}),e.swapPage("user")},src:i.h.cdn.url({collection:"users",file:null===(r=e.expand.author)||void 0===r?void 0:r.avatar,id:null===(u=e.expand.author)||void 0===u?void 0:u.id}),alt:"profile",className:"rounded object-cover w-12 h-12 cursor-pointer"}):(0,t.jsx)("div",{className:"avatar placeholder",children:(0,t.jsx)("div",{onClick:()=>{e.setParams({user:e.author}),e.swapPage("user")},className:"bg-base-200 text-black rounded w-12 h-12 avatar cursor-pointer   ",children:(0,t.jsx)("span",{className:"text-2xl",children:null===(x=e.expand.author)||void 0===x?void 0:x.username.charAt(0).toUpperCase()})})}),(0,t.jsx)("div",{className:"flex flex-col   heros",children:(0,t.jsxs)("div",{className:"flex flex-row h-0 mt-2 gap-2 hero",children:[(0,t.jsx)("p",{onClick:()=>{e.setParams({user:e.author}),e.swapPage("user")},children:(0,t.jsx)("span",{className:"capitalize font-bold cursor-pointer",children:null===(p=e.expand.author)||void 0===p?void 0:p.username})}),(0,t.jsxs)("p",{className:"hover:underline opacity-50 text-sm md:hidden sm:hidden ",children:["@",null===(v=e.expand.author)||void 0===v?void 0:v.username]}),(null===(w=e.expand.author)||void 0===w?void 0:w.validVerified)?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 fill-blue-500 text-white h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}):"",(null===(f=e.expand.author)||void 0===f?void 0:f.isDeveloper)?(0,t.jsx)("div",{className:"tooltip    rounded tooltip-left","data-tip":"Postr Developer",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4   h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})})}):"",(null===(g=e.expand.author)||void 0===g?void 0:g.postr_plus)?(0,t.jsx)("div",{className:"tooltip tooltip-middle cursor-pointer","data-tip":"Subscriber since ".concat(new Date(null===(j=e.expand.author)||void 0===j?void 0:j.plus_subscriber_since).toLocaleDateString()),children:(0,t.jsx)("span",{className:"badge badge-outline badge-sm   border-blue-500 z-[-1] text-sky-500",children:"Postr+ Sub"})}):"","\xb7",(0,t.jsx)("span",{className:"text-sm",children:c(e.created)}),(0,t.jsx)("div",{className:"flex gap-2   absolute end-2 ",children:(0,t.jsxs)("details",{className:"dropdown dropdown-left",children:[(0,t.jsx)("summary",{className:"m-1 cursor-pointer",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})})}),(0,t.jsxs)("ul",{className:"p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{onClick:()=>{navigator.clipboard.writeText(e.id)},children:"Copy Id"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{onClick:()=>{var o;null===(o=document.getElementById(e.id+"embed"))||void 0===o||o.showModal()},children:"Embed Post"})}),(null===(k=e.expand)||void 0===k?void 0:k.author)&&e.expand.author.id==i.h.authStore.model().id?(0,t.jsx)("li",{children:(0,t.jsx)("a",{onClick:()=>{e.pin(e.id)},children:e.pinned?"Unpin":"Pin"})}):"",(null===(b=e.expand)||void 0===b?void 0:b.author)&&e.expand.author.id==i.h.authStore.model().id?(0,t.jsx)("li",{children:(0,t.jsx)("a",{onClick:()=>{var o;null===(o=document.getElementById(e.id+"delete"))||void 0===o||o.showModal()},children:"Delete"})}):""]})]})})]})})]})]}),(0,t.jsxs)("div",{className:"mt-3 mb-4 ",children:[(0,t.jsx)("p",{style:{cursor:"pointer"},onClick:()=>{e.setParams({post:e,type:"posts"}),e.swapPage("view"),window.history.pushState({},"","/?view=status&id="+e.id+"&type=posts")},className:"mt-2",ref:o=>{o&&e.content&&(o.innerHTML=e.content)}}),e.file.length>0?(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:" w-full \n           ".concat(e.file.length>2?"grid grid-cols-2 gap-2":e.file.length>1?"grid grid-cols-2 gap-2":"","\n            col-span-2 grid-flow-dense  "),children:e.file.map((o,s)=>(0,t.jsx)("img",{onClick:()=>{var o;null===(o=document.getElementById(e.id+"imageViewer"+s))||void 0===o||o.showModal()},className:" w-full object-cover\n    \n                    ".concat(e.file.length<2?"rounded  h-96":"border h-64     border-[#f9f9f9]  rounded","\n                    \n                     ").concat(e.file.length>2&&s==e.file.length-1?"col-span-2":"","\n                     \n                    \n                    "),src:i.h.cdn.url({id:e.id||e.params.id,collection:"posts",file:o}),alt:"image"}))})}):"",(0,t.jsxs)("div",{className:"flex    mt-5",children:[(0,t.jsxs)("div",{className:"w-fit flex gap-2  hero",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"\n            hover:rounded-full hover:bg-rose-500 hover:bg-opacity-20 hover:p-2   active:p-1  w-6 h-6 hover:text-rose-500\n            cursor-pointer ".concat(K.includes(i.h.authStore.model().id)?"fill-rose-500 text-rose-500":""),onClick:e=>{console.log("clicked"),R()},children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),K.length]}),(0,t.jsxs)("div",{className:"flex gap-2 hero  p-2 w-fit ",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20 p-1   w-8 h-8 hover:text-sky-500  ",onClick:()=>{var o;null===(o=document.getElementById(e.id+"comments"))||void 0===o||o.showModal()},children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"})}),z.length]}),(0,t.jsx)(d,{originalAuthor:null===(C=e.expand)||void 0===C?void 0:null===(N=C.author)||void 0===N?void 0:N.username,originalPost:e,postID:e.id,cacheKey:e.cacheKey}),(0,t.jsx)("div",{className:"w-fit p-2 hero flex",children:(0,t.jsx)("span",{className:"tooltip tooltip-bottom","data-tip":"share",children:(0,t.jsx)("svg",{onClick:()=>{navigator.share({title:e.expand.author.username+" on Postr ",text:e.content.slice(0,100),url:"https://embedify-v1.vercel.app/embed/posts/".concat(e.id,"/meta")})},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20  p-1 w-7   h-7 hover:text-sky-500",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})})})}),(0,t.jsx)("div",{className:"w-fit p-2 hero flex",children:(0,t.jsx)(n.Z,{id:e.id,className:"\n            cursor-pointer hover:rounded-full hover:bg-sky-500 hover:bg-opacity-20  p-1  w-7 h-7 hover:p-2 hover:text-sky-500\n            ".concat(T?"fill-blue-500 text-blue-500":""),onClick:()=>{T?(i.h.update({collection:"users",cacheKey:"users-".concat(i.h.authStore.model().id),id:i.h.authStore.model().id,record:{bookmarks:i.h.authStore.model().bookmarks.filter(o=>o!=e.id)}}),i.h.update({collection:"posts",cacheKey:e.cacheKey,invalidateCache:["bookmarks-"+i.h.authStore.model().id],id:e.id,record:{bookmarks:i.h.authStore.model().bookmarks.filter(o=>o!=e.id)}}),i.h.authStore.update(),_(!1),e.deleteBookmark&&e.deleteBookmark()):(i.h.update({collection:"users",cacheKey:"users-".concat(i.h.authStore.model().id),id:i.h.authStore.model().id,record:{bookmarks:[...i.h.authStore.model().bookmarks,e.id]}}),i.h.update({collection:"posts",cacheKey:e.cacheKey,invalidateCache:["bookmarks-"+i.h.authStore.model().id],id:e.id,record:{bookmarks:[...i.h.authStore.model().bookmarks,e.id]}}),i.h.authStore.update(),_(!0))}})})]})]}),(0,t.jsx)("div",{className:"flex gap-5 mt-5  ",children:(null===(y=e.expand)||void 0===y?void 0:y.likes)&&(null===(M=e.expand)||void 0===M?void 0:M.likes[0].id)!==i.h.authStore.model().id&&e.expand.likes[0].avatar&&"view"!==e.currentPage?(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:i.h.cdn.url({id:null===(L=e.expand)||void 0===L?void 0:L.likes[0].id,collection:"users",file:null===(D=e.expand)||void 0===D?void 0:D.likes[0].avatar}),alt:null===(S=e.expand)||void 0===S?void 0:S.likes[0].avatar,className:"rounded-full w-6 h-6 cursor-pointer"}),"Liked by"," ",(0,t.jsx)("span",{onClick:()=>{var o;e.setParams({user:null===(o=e.expand)||void 0===o?void 0:o.likes[0].id}),e.swapPage("user")},className:"font-bold hover:underline cursor-pointer",children:(null===(B=e.expand)||void 0===B?void 0:B.likes[0].username)==i.h.authStore.model().username?"you":null===(P=e.expand)||void 0===P?void 0:P.likes[0].username})," ","and ",(null===(A=e.expand)||void 0===A?void 0:A.likes.length)-1," others"]})}):""}),e.file?e.file.map((o,s)=>(0,t.jsx)(a.Z,{id:e.id+"imageViewer"+s,height:"h-[100vw]",width:"w-[100vw]",children:(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden justify-center items-center    relative  ",children:[(0,t.jsx)("svg",{onClick:()=>{var o;null===(o=document.getElementById(e.id+"imageViewer"+s))||void 0===o||o.close()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"  bg-base-200 btn btn-sm btn-circle fixed left-2 top-2",children:(0,t.jsx)("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})}),(0,t.jsx)("img",{src:i.h.cdn.url({id:e.id||e.params.id,collection:"posts",file:o}),alt:e.file,className:"object-cover  cursor-pointer"})]})})):null,(0,t.jsx)(m,{id:e.id,...e}),(0,t.jsxs)("dialog",{id:e.id+"embed",className:"dialog sm:modal xl:shadow-none md:shadow-none lg:shadow-none bg-transparent focus:outline-none",children:[(0,t.jsxs)("div",{className:"modal-box xl:shadow-none lg:shadow-none md:shadow-none",children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:"Embed Post"}),(0,t.jsx)("p",{className:"py-4",children:"Embed this post on your website or blog by copying the code below."}),(0,t.jsx)("div",{className:"modal-action gap-5",children:(0,t.jsxs)("div",{className:"flex gap-5 justify-start  p-2",children:[(0,t.jsx)("input",{type:"text",className:"w-full p-2 rounded bg-base-200",value:'<iframe src="'.concat(window.location.origin,"/embed/").concat(e.id,'" width="100%" height="100%" frameborder="0"></iframe>')}),(0,t.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>{navigator.clipboard.writeText('<iframe src="'.concat(window.location.origin,"/embed/").concat(e.id,'" width="100%" height="100%" frameborder="0"></iframe>'))},children:"Copy"})]})})]}),(0,t.jsxs)("form",{method:"dialog",className:"flex gap-5",children:[(0,t.jsx)("textarea",{className:"w-full p-2 rounded bg-base-200",rows:5,value:'<iframe src="'.concat(window.location.origin,"/embed/").concat(e.id,'" width="100%" height="100%" frameborder="0"></iframe>')}),(0,t.jsx)("button",{className:" ","data-close":!0,children:"Close"})]})]})]},e.id)}}}]);