"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{967:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}});var t=a(5893),s=a(7294),o=a(8565),r=a(3257),n=a(738);function i(){return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]})}var c=a(2506),d=a(5415);let h=(0,s.memo)(function(e){let[l,a]=(0,s.useState)(!1),o=(0,s.useRef)(!1),r=(0,s.useCallback)(()=>{a(!0)},[]);return(0,s.useEffect)(()=>{if(o.current=!0,o.current){let l=new Image;l.src=e.src,l.onload=r}return()=>{o.current=!1}},[]),(0,t.jsxs)(t.Fragment,{children:[l?(0,t.jsx)("img",{onClick:()=>e.onClick?e.onClick():null,src:e.src,fetchPriority:"high",alt:e.alt,width:e.width,height:e.height,className:e.className}):(0,t.jsx)(d.g,{media:!0,hiderows:!0,className:e.className}),e.children?e.children:null]})});var u=a(2545),m=a(230);function x(e){var l,a,d;let[x,p]=(0,s.useState)([]),[g,f]=(0,s.useState)(null),[v,w]=(0,s.useState)(null===(l=e.params.user)||void 0===l?void 0:l.banner),[b,j]=(0,s.useState)(1),[N,k]=(0,s.useState)([]),[y,S]=(0,s.useState)([]),[C,L]=(0,s.useState)(1),[z,M]=(0,s.useState)(0),[A,B]=(0,s.useState)(!0),[V,I]=(0,s.useState)("posts"),[F,P]=(0,s.useState)(null),[E,U]=(0,s.useState)(null),[R,D]=(0,s.useState)(null),[K,T]=(0,s.useState)(0),[W,H]=(0,s.useState)(!1),[Z,_]=(0,s.useState)(!1),[O,Y]=(0,s.useState)(!1),J=(0,s.useRef)(!1);(0,s.useLayoutEffect)(()=>{if(!J.current){if(u.h.cacheStore.get("user-profile-".concat(e.params.user))){let l=JSON.parse(u.h.cacheStore.get("user-profile-".concat(e.params.user))).value;f(l),p(l.followers),w(l.banner),l.followers.map(e=>{u.h.authStore.model().following.includes(e.id)&&Y(!0)});return}u.h.read({id:e.params.user,collection:"users",cacheKey:"user-profile-".concat(e.params.user),expand:["followers","following","following.followers"]}).then(l=>{u.h.cacheStore.set("user-profile-".concat(e.params.user),l,12e4),f(l),console.log(l.followers),p(l.followers),H(!1),w(l.banner),l.followers.map(e=>{u.h.authStore.model().following.includes(e.id)&&Y(!0)}),document.title="".concat(l.username," (@").concat(l.username,") | Postr")})}},[e.params.user]);let[$,q]=(0,s.useState)(!0),G=(0,s.useRef)(null),Q=(0,s.useRef)(null),X=(0,s.useRef)(!1);function ee(e){I(e),"collections"!==e&&(j(1),function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;q(!0);let a="posts"===e?'author.id ="'.concat(g.id,'"'):"likes"===e?'likes~"'.concat(g.id,'" && author.id != "').concat(g.id,'"'):"media"===e?'author.id ="'.concat(g.id,'" && file:length > 0  '):"";j(1),k([]),q(!0),u.h.list({collection:"posts"===e||"likes"===e?"posts":"media"===e?"posts":"",limit:10,filter:a,cacheKey:"user-feed-".concat(e,"-").concat(l,"-").concat(g.id),expand:["author","comments.user","user","post","post.author","author.followers","author.following","author.following.followers","author.following.following","likes"],page:1,sort:"posts"!==e?"-created":"-pinned, -created"}).then(l=>{"media"===e&&(l.items=l.items.filter(e=>e.file.length>0)),k(l.items),L(l.totalPages),M(l.totalItems),B(!0),setTimeout(()=>{q(!1)},"media"===V?1200:500)})}(e))}async function el(){let l={};switch(!0){case g.username!==u.h.authStore.model().username&&g.username.length<3:case g.username!==u.h.authStore.model().username&&null==g.username.match(/^[a-zA-Z0-9_]*$/):try{if(await u.h.checkName(g.username)){alert("Username already exists.");return}}catch(e){console.log(e)}break;case 0!=g.bio.length&&g.bio.length<5:alert("Bio must be at least 10 characters");break;case 0!=g.social.length&&g.social.length<10:alert("Social links must be at least 10 characters")}g.username!==e.params.user.username&&(l.username=g.username),g.bio!==e.params.user.bio&&(l.bio=g.bio),g.location!==e.params.user.location&&(l.location=g.location),g.social!==e.params.user.social&&(l.social=g.social),null!==E&&(l.banner={isFile:!0,update:!0,file:{data:await u.h.getAsByteArray(E),size:R.size,name:R.name,type:R.type}}),null!==F&&(l.avatar={isFile:!0,update:!0,file:{data:await u.h.getAsByteArray(F),size:F.size,name:F.name,type:F.type},name:F.name,type:F.type});try{var a;if(Object.keys(l).length>0){_(!0);let e=await u.h.update({collection:"users",id:g.id,immediatelyUpdate:!0,invalidateCache:["user-profile-".concat(g.id)],record:l,cacheKey:"user-profile-".concat(u.h.authStore.model().id),expand:["followers","following","following.followers","following.following"]});u.h.cacheStore.delete("user-profile-".concat(u.h.authStore.model().id)),u.h.authStore.update(),f(e),w(e.banner),_(!1)}null===(a=document.getElementById("edit-modal"))||void 0===a||a.close()}catch(e){console.log(e)}}return window.onscroll=()=>{T(window.scrollY)},(0,s.useEffect)(()=>{if(X.current&&$){X.current=!0;return}if(e.params.scrollTo){let l=setInterval(()=>{let a=document.getElementById(e.params.scrollTo);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.className="xl:mt-0 w-full    xl:p-3  xl:mb-0 mb-6   ".concat("user"!==e.page&&"bookmarks"!==e.page&&"home"!==e.page?"xl:p-5 sm:p-2":"home"==e.page?"xl:p-5  ":"","\n          animate-pulse\n          "),setTimeout(()=>{a.className="xl:mt-0 w-full    xl:p-3  xl:mb-0 mb-6   ".concat("user"!==e.page&&"bookmarks"!==e.page&&"home"!==e.page?"xl:p-5 sm:p-2":"home"==e.page?"xl:p-5  ":"")},4e3),clearInterval(l))},1e3)}return window.scrollTo({top:0,behavior:"smooth"}),u.h.list({collection:"posts",limit:10,filter:'author.id ="'.concat(e.params.user,'"'),cacheKey:"user-feed-".concat(V,"-").concat(b,"-").concat(e.params.user),expand:["author","comments.user","user","post","post.author","author.followers","author.following"],page:1,sort:"-pinned, -created"}).then(e=>{console.log(e),"posts"===V&&(e.items=e.items.sort((e,l)=>l.pinned-e.pinned)),k(e.items),L(e.totalPages),M(e.totalItems),B(!0),q(!1)}),()=>{X.current=!1}},[e.params.user]),console.log(g),(0,t.jsxs)("div",{className:" relative xl:flex   lg:flex   2xl:w-[80vw]   justify-center xl:mx-auto",children:[(0,t.jsx)(m.k,{...e}),K>1050&&N.length>0?(0,t.jsxs)("div",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed z-[999] cursor-pointer top-24 p-3 w-fit h-10  xl:top-24 border border-slate-200 shadow hover:font-bold  translate-x-0 inset-x-0  mx-auto flex hero gap-2 text-white    rounded-full bg-[#43b1f1]\n          ",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 0 1-.75-.75V5.612L5.29 9.77a.75.75 0 0 1-1.08-1.04l5.25-5.5a.75.75 0 0 1 1.08 0l5.25 5.5a.75.75 0 1 1-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0 1 10 17Z",clipRule:"evenodd"})}),"Scroll to top"]}):null,(0,t.jsxs)("div",{className:"flex   xl:mx-24     text-md   \n       relative \n       xl:w-[35vw]\n       md:w-[80vw] flex-col ".concat("dark"==theme?"xl:border xl:border-[#121212]":"xl:border xl:border-[#f9f9f9] ","  lg:w-[50vw]  "),children:[(0,t.jsxs)("div",{className:"flex p-3 hero sticky top-0 z-[9999] ".concat("dark"===theme?"bg-black":"bg-white"," justify-between"),children:[(0,t.jsx)("div",{className:"hover:border-slate-200   btn-ghost btn btn-circle btn-sm \n        ".concat("dark"===theme?"bg-black hover:bg-black":"bg-white hover:bg-white","  \n        "),children:(0,t.jsx)("svg",{onClick:()=>{let l=e.lastPage;e.swapPage(l)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"xl:w-6 xl:h-6 w-5 h-5 cursor-pointer   ",children:(0,t.jsx)("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})})}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("p",{className:"text-1xl ",children:["@",g&&(null==g?void 0:g.username)||"loading"]})}),(0,t.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,t.jsx)("div",{tabIndex:0,role:"button",className:"m-1",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{d:"M3 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM15.5 8.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"})})}),(0,t.jsxs)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:"Item 1"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{children:"Item 2"})})]})]})]}),(0,t.jsxs)("div",{className:"relative h-44 flex  mt-2 flex-col gap-4",children:[""!==v&&g?(0,t.jsx)("img",{src:u.h.cdn.url({id:g.id,file:v,collection:"users"}),alt:"",className:"w-full h-full sm:h-32 object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-gray-300"}),(0,t.jsxs)("div",{className:"flex justify-between sm:mb-6 xsm:mb-6 relative w-full",children:[(0,t.jsx)("div",{className:"indicator w-24  ",children:g&&g.avatar?(0,t.jsx)("img",{src:u.h.cdn.url({id:g.id,file:g.avatar,collection:"users"}),alt:g.username,className:" w-24  h-24     rounded object-cover avatar  absolute bottom-[-3vh] left-2   border-2 border-double shadow   border-white"}):(0,t.jsx)("div",{className:"avatar placeholder   absolute bottom-[-3vh] left-2",children:(0,t.jsx)("div",{className:"bg-base-200 text-black rounded w-24  h-24   avatar    border-2   shadow   border-white",children:(0,t.jsx)("span",{className:"text-2xl",children:g&&g.username.charAt(0).toUpperCase()||"U"})})})}),(0,t.jsxs)("div",{className:"absolute right-2 flex gap-5 ",children:[g&&g.id!==u.h.authStore.model().id?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("button",{className:"btn border-none text-white hover:bg-black  btn-sm rounded-full bg-black",children:"Message"})}):"",(0,t.jsx)("button",{onClick:()=>{var e,l;g.id===u.h.authStore.model().id?null===(l=document)||void 0===l||null===(e=l.getElementById("edit-modal"))||void 0===e||e.showModal():!0===x.includes(u.h.authStore.model().id)?(p(x.filter(e=>e!=u.h.authStore.model().id)),u.h.update({collection:"users",id:g.id,cacheKey:"user-".concat(g.id),invalidateCache:["user-profile-".concat(g.id)],immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{followers:x.filter(e=>e!=u.h.authStore.model().id)}}).then(e=>{console.log(e),u.h.update({collection:"users",id:u.h.authStore.model().id,invalidateCache:["user-home-".concat(u.h.authStore.model().id)],immediatelyUpdate:!0,cacheKey:"user-".concat(u.h.authStore.model().id),expand:["followers","following","following.followers","following.following"],record:{following:u.h.authStore.model().following.filter(e=>e!=g.id)}}).then(e=>{u.h.authStore.update()})})):(p([...x,u.h.authStore.model().id]),u.h.update({collection:"users",id:g.id,cacheKey:"user-".concat(g.id),invalidateCache:["user-profile-".concat(g.id)],immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{followers:[...g.followers,u.h.authStore.model().id]}}).then(e=>{u.h.update({collection:"users",cacheKey:"user-".concat(u.h.authStore.model().id),id:u.h.authStore.model().id,invalidateCache:["user-home-".concat(u.h.authStore.model().id)],immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{following:[...u.h.authStore.model().following,g.id]}}).then(e=>{u.h.authStore.update()})}))},className:"btn border-none  \n                ".concat("dark"===theme?"hover:bg-white bg-white text-black":"hover:bg-black bg-black text-white","\n                btn-sm rounded-full  "),children:g&&g.id===u.h.authStore.model().id?"Edit Profile":x.includes(u.h.authStore.model().id)?"Unfollow":"Follow"})]})]})]}),(0,t.jsxs)("div",{className:"justify-between relative text-sm mt-[8vh] sm:mt-2 mx-4",children:[(0,t.jsxs)("div",{className:"flex w-full  hero gap-3",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:g&&g.username||"loading"}),g&&g.isVerified?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 fill-blue-500 text-white h-8",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}):"",g&&g.isDeveloper?(0,t.jsx)("div",{className:"tooltip    rounded tooltip-left","data-tip":"Postr Developer",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5   h-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})})}):"",g&&g.plus_subscriber?(0,t.jsx)("div",{className:"tooltip z[-1]","data-tip":"Subscriber since ".concat(new Date(g.plus_subscriber_since).toLocaleDateString()),children:(0,t.jsx)("span",{className:"badge badge-outline badge-md text-sm border-blue-500 z-[-1] text-sky-500",children:"Postr+ Subscriber"})}):""]}),(0,t.jsxs)("p",{className:"opacity-45",children:["@",g&&g.username||"loading"]}),(0,t.jsx)("p",{className:"mt-3 tet-md w-full  ",children:g&&""!==g.bio?g.bio:"This user has not set a bio."}),(0,t.jsxs)("div",{className:"flex flex-wrap  gap-2",children:[(0,t.jsxs)("p",{className:"hero flex mt-4 gap-2 w-full",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})}),"Joined ",g&&new Date(g.created).toLocaleDateString()||"loading"]}),(0,t.jsx)("div",{children:g&&""!==g.location?(0,t.jsxs)("p",{className:"mt-4 hero flex gap-2 w-full",children:[(0,t.jsx)(i,{})," ",(0,t.jsx)("span",{className:"text-md cursor-pointer font-medium",children:g.location})]}):""}),(0,t.jsx)("p",{children:g&&""!==g.social?(0,t.jsxs)("p",{className:"mt-4 hero flex gap-2 w-full",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),(0,t.jsx)("span",{className:"text-md cursor-pointer font-medium",children:(0,t.jsx)("span",{onClick:()=>{window.open(g.social)},className:"text-blue-500 text-md w-5/6  hover:underline",children:g.social.replace(/(^\w+:|^)\/\//,"")})})]}):""})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2 mx-1",children:[(0,t.jsxs)("p",{className:" mt-2 text-md",children:[(0,t.jsxs)("span",{className:"font-bold",children:[" ",g&&g.following?g.following.length:0," "]}),"Following"]}),(0,t.jsxs)("p",{className:" mt-2 text-md",children:[(0,t.jsxs)("span",{className:"font-bold",children:[" ",void 0!==x?x.length:0," "]}),void 0!==x&&1===x.length?"Follower":"Followers"]})]})]}),(0,t.jsx)("div",{className:"hero w-fit flex",children:g&&(null===(a=g.expand)||void 0===a?void 0:a.followers)&&g.id!==u.h.authStore.model().id&&(null===(d=g.expand)||void 0===d?void 0:d.followers.length)>0?(0,t.jsxs)("div",{className:"avatar-group mx-3 -space-x-6 flex gap-8 text-sm   rtl:space-x-reverse",children:[g.expand.followers.map(e=>{if(u.h.authStore.model().following.includes(e.id))return(0,t.jsx)(t.Fragment,{children:e.avatar?(0,t.jsx)("div",{className:"avatar  rounded-full  ",children:(0,t.jsx)("div",{className:"w-4",children:(0,t.jsx)("img",{src:u.h.cdn.url({id:e.id,collection:"users",file:e.avatar}),alt:"",className:" object-cover"})})}):(0,t.jsx)("div",{className:"  placeholder avatar  rounded-full ",children:(0,t.jsx)("div",{className:"   ",children:(0,t.jsx)("span",{className:"text-2xl",children:e.username.charAt(0).toUpperCase()})})})})}),(0,t.jsx)("p",{className:" mt-1 opacity-70 hover:underline cursor-pointer",children:g&&g.expand.followers.length>1&&O?(0,t.jsxs)(t.Fragment,{children:["Followed by "," ",g.followers.map(l=>{if(u.h.authStore.model().following.includes(l.id))return(0,t.jsx)("a",{onClick:()=>{e.setParams({user:l.id}),e.swapPage("user")},className:"hover:underline cursor-pointer",children:l.username})})]}):""})]}):""}),(0,t.jsxs)("div",{className:"flex flex-row p-2 gap-2 justify-between    xl:border-[#f9f9f9] ",children:[(0,t.jsxs)("a",{role:"tab",onClick:()=>{"posts"!==V&&ee("posts")},className:"\n         p-2  cursor-pointer  ".concat("posts"===V?"active font-bold   ":"","\n      "),children:["Posts","posts"===V?(0,t.jsx)("div",{className:" rounded-md h-1 bg-blue-500"}):""]}),(0,t.jsxs)("a",{onClick:()=>{"replies"!==V&&ee("collections")},role:"tab",className:"  cursor-pointer  p-2  ".concat("replies"===V?"active  ":""),children:["Collections","collections"===V?(0,t.jsx)("div",{className:" rounded-md h-1 bg-blue-500"}):""]}),(0,t.jsxs)("a",{onClick:()=>{"media"!==V&&ee("media")},role:"tab",className:"\n         p-2  cursor-pointer ".concat("media"===V?"active font-bold  ":"","\n      "),children:["Media","media"===V?(0,t.jsx)("div",{className:" rounded-md h-1 bg-blue-500"}):""]}),(0,t.jsxs)("a",{onClick:()=>{"likes"!==V&&ee("likes")},role:"tab",className:"\n       p-2  cursor-pointer ".concat("likes"===V?"active font-bold":"","\n      "),children:["Likes","likes"===V?(0,t.jsx)("div",{className:" rounded-md h-2 bg-blue-500"}):""]})]}),(0,t.jsx)(n.Z,{hasMore:A,dataLength:N.length,next:function(){if(console.clear(),!0==b>=C){console.log("no more"),B(!1);return}"collections"!==V&&u.h.list({cacheKey:"user-feed-".concat(V,"-").concat(b+1,"-").concat(g.id),collection:"posts"===V?"posts":"likes"===V?"posts":"replies"===V?"comments":"media"===V?"posts":"",limit:10,filter:"posts"===V?'author.id ="'.concat(g.id,'" && pinned=false'):"likes"===V?'likes?~"'.concat(g.id,'" && author.id != "').concat(g.id,'"'):"replies"===V?'user.id="'.concat(g.id,'" &&post.author.id!="').concat(g.id,'"'):"media"===V?'file:length > 0  && author.id ="'.concat(g.id,'"'):"",expand:["author","comments.user","user","post","post.author","author.followers","author.following","author.following.followers","author.following.following","likes"],sort:"-created",page:b+1}).then(e=>{"media"===V&&(e.items=e.items.filter(e=>e.file.length>0)),k([...N,...e.items]),B(!0),j(b+1)})},loader:"",children:(0,t.jsx)("div",{className:"media"!==V||$?"flex flex-col  xl:p-0 lg:p-0 md:p-0 p-4 mb-24 ":"grid grid-cols-3 gap-3   mb-24 xl:p-3 lg:p-3 md:p-3  sm:p-3 p-2",children:$?(0,t.jsx)("div",{className:"mx-auto W-full flex justify-center",children:(0,t.jsx)("span",{className:"loading loading-spinner-large loading-spinner mt-5 text-blue-600"})}):"posts"===V||"likes"===V?N.length>0?N.map((l,a)=>(0,t.jsx)("div",{style:{border:"dark"===theme?"1px solid #121212":"1px solid #f9f9f9"},className:a===N.length-1?"sm:mt-3":"",children:(0,s.createElement)(c.Z,{...l,user:g,page:e.page,params:e.params,swapPage:e.swapPage,setParams:e.setParams,cacheKey:g&&"user-feed-posts-".concat(b,"-").concat(g.id),key:l.id,setArray:k,array:N,pin:e=>{let t=N.find(l=>l.id===e);if(t.pinned){t.pinned=!1;let e=[...N];for(var s in e[a]=t,e=e.sort((e,l)=>new Date(l.created).getTime()-new Date(e.created).getTime()))e[s].pinned&&(e.unshift(e.splice(s,1)[0]),e=e.sort((e,l)=>{if(e.pinned&&l.pinned)return new Date(l.created).getTime()-new Date(e.created).getTime()}));u.h.update({collection:"posts",id:l.id,record:{pinned:!1},cacheKey:"user-feed-posts-".concat(b,"-").concat(g.id)}),k(e);return}t.pinned=!0;let o=[...N];o[a]=t,o.unshift(o.splice(a,1)[0]),u.h.update({collection:"posts",id:e,record:{pinned:!0},cacheKey:"user-feed-posts-".concat(b,"-").concat(g.id)}),k(o)},currentPage:b})})):(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-center text-xl font-bold mt-10",children:[g&&g.id===u.h.authStore.model().id?"You":g&&g.username,"posts"===V?" haven't posted anything yet.":"likes"===V?" hasn't liked anything yet.":""]})}):"collections"===V?N.length>0?(0,t.jsx)("div",{className:"mt-5",children:"Coming Soon"}):0===N.length?(0,t.jsx)("div",{className:"text-center text-lg mt-10",children:(0,t.jsx)("p",{className:"font-extrabold ",children:u.h.authStore.model().id===g.id?"You haven't replied to anything yet.":"@".concat(g.username," hasn't replied to anyone yet")})}):"":"media"===V?N.length>0?N.map(e=>(0,t.jsx)(t.Fragment,{children:e.file.map(l=>{let a=l.replace(/\./g,"");return(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(h,{onClick:()=>{var e;null===(e=document.getElementById(a))||void 0===e||e.showModal()},src:u.h.cdn.url({id:e.id,collection:"posts",file:l}),height:"100%",width:"100%",alt:"",className:"w-full cursor-pointer   rounded-md h-44 object-cover"}),(0,t.jsx)(r.Z,{id:a,height:"h-[100vh]",children:(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center h-full bg-[#121212]  relative",children:[(0,t.jsx)("svg",{onClick:()=>{var e;null===(e=document.getElementById(a))||void 0===e||e.close()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6 cursor-pointer text-white absolute left-2 top-2",children:(0,t.jsx)("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})}),(0,t.jsx)("img",{src:u.h.cdn.url({id:e.id,collection:"posts",file:l}),alt:l,className:" w-full   object-contain mt-2 cursor-pointer"})]})})]})})})):Array.from(Array(10).keys()).map(e=>(0,t.jsx)(h,{src:"",height:"100%",width:"100%",alt:"",className:"w-full   rounded-md h-44 object-cover"})):""})}),(0,t.jsxs)(r.Z,{style:{borderRadius:"1rem"},id:"edit-modal",className:"".concat("dark"===theme?"bg-black":"bg-white","  p-0  rounded-lg  xl:rounded-box xl:max-w-[75vw] xl:h-[75vh] h-screen"),height:"xl:h-[75vh] xl:rounded-box xl:max-w-[75vw] h-screen",children:[(0,t.jsx)("div",{className:"mx-2 mt-3    p-0",children:(0,t.jsxs)("div",{className:"flex hero justify-between",children:[(0,t.jsx)("svg",{onClick:()=>{var e;null===(e=document)||void 0===e||e.getElementById("edit-modal").close()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 cursor-pointer   ",children:(0,t.jsx)("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})}),(0,t.jsx)("p",{className:"text-1xl mx-8 mr-0",children:"Edit Profile"}),Z?(0,t.jsx)("span",{className:"loading  loading-sm loading-spinner  text-blue-600"}):(0,t.jsx)("button",{className:"btn btn-sm rounded-full bg-black text-white ",onClick:()=>{console.log("saving"),el()},children:"Save"})]})}),(0,t.jsx)("input",{type:"file",className:"hidden",id:"change-avatar",name:"change-avatar",accept:"image/*",onChange:e=>{if(console.log(e.target.files),e.target.files){let l=e.target.files[0];if(P(l),l){let e=new FileReader;e.onload=e=>{var l;Q.current.src=null===(l=e.target)||void 0===l?void 0:l.result},e.readAsDataURL(l)}}}}),(0,t.jsx)("input",{type:"file",className:"hidden",id:"change-banner",name:"change-banner",accept:"image/*",onChange:e=>{if(e.target.files){let l=e.target.files[0];U(new Blob([l],{type:l.type})),D(l);let a=new FileReader;a.onload=e=>{var l;G.current.src=null===(l=e.target)||void 0===l?void 0:l.result},a.readAsDataURL(l)}}}),(0,t.jsxs)("div",{className:"flex flex-col croll   relative mt-4",children:[(0,t.jsxs)("div",{className:"relative h-24 mb-6   flex flex-col w-full gap-2",children:[g&&""!==g.banner||g&&null!==E?(0,t.jsxs)("div",{className:"relative h-[9rem]",children:[(0,t.jsx)("img",{src:null!==E?URL.createObjectURL(E):u.h.cdn.url({id:g.id,file:g.banner,collection:"users"}),ref:G,alt:"",className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute btn btn-circle bg-[#030303] bg-opacity-25  inset-x-0 mx-auto translate-x-0   left-[-2vw] text-white top-[30%]",children:(0,t.jsx)("label",{htmlFor:"change-banner",onClick:()=>{document.getElementById("change-banner").click()},children:(0,t.jsx)("button",{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]}):(0,t.jsxs)("div",{className:"relative h-32",children:[(0,t.jsx)("div",{className:"w-full h-36 object-cover bg-gray-300 "}),(0,t.jsx)("div",{className:"absolute btn btn-circle bg-[#030303] bg-opacity-25  inset-x-0 mx-auto translate-x-0   left-[-2vw] text-white top-[30%]",children:(0,t.jsx)("label",{htmlFor:"change-banner",onClick:()=>{document.getElementById("change-banner").click()},children:(0,t.jsx)("button",{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]}),g&&""!==e.params.user.avatar||g&&null!==F?(0,t.jsx)("div",{className:"absolute top-[80px] left-2",children:(0,t.jsxs)("div",{className:"relative w-32  ",children:[(0,t.jsx)("img",{src:F||u.h.cdn.url({id:g.id,collection:"users",file:g.avatar}),ref:Q,alt:"",className:"w-20 h-20 object-cover avatar rounded  border-slate-200 border-2"}),(0,t.jsx)("label",{htmlFor:"change-avatar",onClick:()=>{document.getElementById("change-avatar").click()},children:(0,t.jsx)("div",{className:"text-white absolute btn btn-circle btn-sm bg-[#030303] bg-opacity-25 left-[25px] top-[26px] inset-x-0   translate-x-0",children:(0,t.jsx)("button",{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]})}):(0,t.jsx)("div",{className:"absolute top-[80px] left-5",children:(0,t.jsxs)("div",{className:"relative w-32  ",children:[(0,t.jsx)("div",{className:"w-20 h-20 object-cover bg-gray-300 avatar rounded border-slate-200 border-2"}),(0,t.jsx)("label",{htmlFor:"change-avatar",onClick:()=>{document.getElementById("change-avatar").click()},children:(0,t.jsx)("div",{className:"text-white absolute btn btn-circle btn-sm bg-[#030303] bg-opacity-50 left-[25px] top-[26px] inset-x-0   translate-x-0",children:(0,t.jsx)("button",{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]})})]}),(0,t.jsx)("div",{className:"mt-12  p-3 sm:scroll ",children:(0,t.jsxs)("div",{className:"relativ  flex flex-col gap-3  ",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Username"}),(0,t.jsx)("textarea",{className:"w-full h-12 p-2  mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Bio",...g?{value:g.username}:{},defaultValue:e.params.user.username,onChange:e=>{if(e.target.value.length>=15){f({...g,username:e.target.value.slice(0,15)});return}f({...g,username:e.target.value})}})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{children:"Bio"}),(0,t.jsx)("textarea",{className:"w-full h-20 p-2 mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Bio",value:g&&g.bio,onChange:e=>{if(e.target.value.length>=160){f({...g,bio:e.target.value.slice(0,160)});return}f({...g,bio:e.target.value})},defaultValue:e.params.user.bio}),(0,t.jsxs)("p",{className:"absolute bottom-4 right-4 text-xs opacity-50",children:[g&&g.bio.length,"/",160]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{children:"Location"}),(0,t.jsx)("textarea",{className:"w-full h-12 p-2 mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Location",value:g&&g.location,onChange:e=>{if(e.target.value.length>=30){f({...g,location:e.target.value.slice(0,30)});return}f({...g,location:e.target.value})},defaultValue:e.params.user.location}),(0,t.jsxs)("p",{className:"absolute bottom-4 right-4 text-xs opacity-50",children:[g&&g.location.length,"/30"]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{children:["Social"," ",(0,t.jsx)("span",{className:"text-sm opacity-50",children:"(Strafe, Twitter, Instagram, Website.)"})]}),(0,t.jsx)("textarea",{className:"w-full h-12 p-2 mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Social",value:g&&g.social,onChange:e=>{if(e.target.value.length>=40){f({...g,social:e.target.value.slice(0,40)});return}f({...g,social:e.target.value})},defaultValue:e.params.user.social})]})]})})]})]})]}),(0,t.jsx)(m.h,{...e}),(0,t.jsx)("div",{className:"xl:hidden lg:hidden md:hidden",children:(0,t.jsx)(o.L,{swapPage:e.swapPage})})]},e.params.user)}},5415:function(e,l,a){a.d(l,{g:function(){return o}});var t=a(5893),s=a(7294);let o=(0,s.memo)(function(e){return(0,t.jsxs)("div",{className:"flex  flex-col gap-4 w-full \n     \n    xl:p-2  lg:p-2 md:p-2\n    ".concat(e.media?"rounded h-44 p-0":"mb-16"),children:[e.media?(0,t.jsx)("div",{className:"skeleton \n      ".concat(e.className?e.className:"h-42","\n      ").concat(e.media?"rounded":"rounded-none","\n      w-full")}):null,e.hiderows?null:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"skeleton\n    ".concat(e.page&&"home"==e.page?"w-16 h-16":" w-12 h-12","\n    rounded  shrink-0")}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"skeleton h-4 w-32 "}),(0,t.jsx)("div",{className:"skeleton h-4 w-32"})]})]})})]})})}}]);