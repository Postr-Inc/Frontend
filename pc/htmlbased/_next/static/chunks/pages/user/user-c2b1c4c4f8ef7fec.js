(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{374:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/user",function(){return l(967)}])},967:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return p}});var o=l(5893),s=l(7294),a=l(8565),r=l(3257),n=l(738);function i(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]})}var c=l(7159),d=l(5415);let h=(0,s.memo)(function(e){let[t,l]=(0,s.useState)(!1),a=(0,s.useRef)(!1),r=(0,s.useCallback)(()=>{l(!0)},[]);return(0,s.useEffect)(()=>{if(a.current=!0,a.current){let t=new Image;t.src=e.src,t.onload=r}return()=>{a.current=!1}},[]),(0,o.jsxs)(o.Fragment,{children:[t?(0,o.jsx)("img",{onClick:()=>e.onClick?e.onClick():null,src:e.src,fetchPriority:"high",alt:e.alt,width:e.width,height:e.height,className:e.className}):(0,o.jsx)(d.g,{media:!0,hiderows:!0,className:e.className}),e.children?e.children:null]})});var u=l(8703),m=l(3446);function p(e){var t,l,d;let[p,f]=(0,s.useState)([]),[g,x]=(0,s.useState)(null),[v,w]=(0,s.useState)(null===(t=e.params.user)||void 0===t?void 0:t.banner),[b,j]=(0,s.useState)(1),[N,y]=(0,s.useState)([]),[k,S]=(0,s.useState)([]),[L,E]=(0,s.useState)(1),[T,C]=(0,s.useState)(0),[M,z]=(0,s.useState)(!0),[D,_]=(0,s.useState)("posts"),[P,A]=(0,s.useState)(null),[B,R]=(0,s.useState)(null),[Y,F]=(0,s.useState)(null),[V,I]=(0,s.useState)(0),[H,U]=(0,s.useState)(!1),[O,W]=(0,s.useState)(!1),[K,Z]=(0,s.useState)(!1),$=(0,s.useRef)(!1);(0,s.useLayoutEffect)(()=>{u.h.online.forEach(t=>{var l;(null==t?void 0:t.userID)!=(null===(l=e.params)||void 0===l?void 0:l.user)||$.current||($.current=!0)}),u.h.read({id:e.params.user,collection:"users",cacheKey:"user-profile-".concat(e.params.user),expand:["followers","following","following.followers"]}).then(t=>{console.log(t.username),x(t),console.log(t.followers),f(t.followers),U(!1),w(t.banner),t.followers.map(e=>{u.h.authStore.model().following.includes(e.id)&&Z(!0)}),document.title="".concat(t.username," (@").concat(t.username,") | Postr"),u.h.online.forEach(t=>{var l;(null==t?void 0:t.userID)!=(null===(l=e.params)||void 0===l?void 0:l.user)||H||U(!0)})})},[e.params.user]),window.addEventListener("online",()=>{u.h.online.forEach(t=>{var l;(null==t?void 0:t.userID)!=(null===(l=e.params)||void 0===l?void 0:l.user)||H||U(!0)})});let[X,q]=(0,s.useState)(!0),J=(0,s.useRef)(null),G=(0,s.useRef)(null),Q=(0,s.useRef)(!1);function ee(e){_(e),"collections"!==e&&(j(1),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;q(!0);let l="posts"===e?'author.id ="'.concat(g.id,'"'):"likes"===e?'likes~"'.concat(g.id,'" && author.id != "').concat(g.id,'"'):"media"===e?'author.id ="'.concat(g.id,'" && file:length > 0  '):"";j(1),y([]),q(!0),u.h.list({collection:"posts"===e||"likes"===e?"posts":"media"===e?"posts":"",limit:10,filter:l,cacheKey:"user-feed-".concat(e,"-").concat(t,"-").concat(g.id),expand:["author","comments.user","user","post","post.author","author.followers","author.following","author.following.followers","author.following.following","likes"],page:0,sort:"posts"!==e?"-created":"-pinned, -created"}).then(t=>{"media"===e&&(t.items=t.items.filter(e=>e.file.length>0)),y(t.items),E(t.totalPages),C(t.totalItems),z(!0),setTimeout(()=>{q(!1)},"media"===D?1200:500)})}(e))}async function et(){let t={};switch(!0){case g.username!==u.h.authStore.model().username&&g.username.length<3:case g.username!==u.h.authStore.model().username&&null==g.username.match(/^[a-zA-Z0-9_]*$/):try{if(await u.h.checkUsername(g.username)){alert("Username already exists.");return}}catch(e){console.log(e)}break;case g.bio!==e.params.user.bio&&g.bio.length<3:console.log("bio too short");case g.social.length>0&&!g.social.match(/(?:https):\/\/[\n\S]+/g):return alert("Invalid link")}g.username!==e.params.user.username&&(t.username=g.username),g.bio!==e.params.user.bio&&(t.bio=g.bio),g.location!==e.params.user.location&&(t.location=g.location),g.social!==e.params.user.social&&(t.social=g.social),null!==B&&(t.banner={isFile:!0,update:!0,file:{data:await u.h.getAsByteArray(B),size:Y.size,name:Y.name,type:Y.type}}),null!==P&&(t.avatar={isFile:!0,update:!0,file:{data:await u.h.getAsByteArray(P),size:P.size,name:P.name,type:P.type},name:P.name,type:P.type});try{var l;if(Object.keys(t).length>0){W(!0);let e=await u.h.update({collection:"users",id:g.id,immediatelyUpdate:!0,invalidateCache:"user-profile-".concat(u.h.authStore.model().id),record:t,cacheKey:"user-profile-".concat(u.h.authStore.model().id),expand:["followers","following","following.followers","following.following"]});u.h.authStore.update(),x(e),w(e.banner),W(!1)}null===(l=document.getElementById("edit-modal"))||void 0===l||l.close()}catch(e){console.log(e)}}return window.onscroll=()=>{I(window.scrollY)},(0,s.useEffect)(()=>{if(Q.current&&X){Q.current=!0;return}if(e.params.scrollTo){let t=setInterval(()=>{let l=document.getElementById(e.params.scrollTo);l&&(l.scrollIntoView({behavior:"smooth",block:"center"}),l.className="xl:mt-0 w-full    xl:p-3  xl:mb-0 mb-6   ".concat("user"!==e.page&&"bookmarks"!==e.page&&"home"!==e.page?"xl:p-5 sm:p-2":"home"==e.page?"xl:p-5  ":"","\n          animate-pulse\n          "),setTimeout(()=>{l.className="xl:mt-0 w-full    xl:p-3  xl:mb-0 mb-6   ".concat("user"!==e.page&&"bookmarks"!==e.page&&"home"!==e.page?"xl:p-5 sm:p-2":"home"==e.page?"xl:p-5  ":"")},4e3),clearInterval(t))},1e3)}return window.scrollTo({top:0,behavior:"smooth"}),u.h.list({collection:"posts",limit:10,filter:'author.id ="'.concat(e.params.user,'"'),cacheKey:"posts-".concat(e.params.user),expand:["author","comments.user","user","post","post.author","author.followers","author.following"],page:1,sort:"-pinned, -created"}).then(e=>{console.log(e),"posts"===D&&(e.items=e.items.sort((e,t)=>t.pinned-e.pinned)),y(e.items),E(e.totalPages),C(e.totalItems),z(!0),q(!1)}),()=>{Q.current=!1}},[e.params.user]),console.log(g),(0,o.jsxs)("div",{className:" relative xl:flex   lg:flex   xl:w-[80vw]   justify-center xl:mx-auto",children:[(0,o.jsx)(m.k,{...e}),V>1050&&N.length>0?(0,o.jsxs)("div",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed z-[999] cursor-pointer top-4 p-3 w-fit h-10  xl:top-24 border border-slate-200 shadow hover:font-bold  translate-x-0 inset-x-0  mx-auto flex hero gap-2 text-white    rounded-full bg-[#43b1f1]",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 0 1-.75-.75V5.612L5.29 9.77a.75.75 0 0 1-1.08-1.04l5.25-5.5a.75.75 0 0 1 1.08 0l5.25 5.5a.75.75 0 1 1-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0 1 10 17Z",clipRule:"evenodd"})}),"Scroll to top"]}):null,(0,o.jsxs)("div",{className:"flex   xl:mx-24     text-md    relative  xl:w-[35vw] md:w-[80vw] flex-col xl:border xl:border-[#f9f9f9]   lg:w-[50vw]  ",children:[(0,o.jsxs)("div",{className:"flex p-3 hero sticky top-0 z-[9999] bg-white justify-between",children:[(0,o.jsx)("div",{className:"hover:border-slate-200 hover:bg-white btn-ghost btn btn-circle btn-sm bg-white",children:(0,o.jsx)("svg",{onClick:()=>{let t=e.lastPage;e.swapPage(t)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"xl:w-6 xl:h-6 w-5 h-5 cursor-pointer   ",children:(0,o.jsx)("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})})}),(0,o.jsxs)("p",{className:"text-1xl ",children:["@",g&&(null==g?void 0:g.username)||"loading"]}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,o.jsx)("path",{d:"M3 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM15.5 8.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"})})]}),(0,o.jsxs)("div",{className:"relative h-44 flex  mt-2 flex-col gap-4",children:[""!==v&&g?(0,o.jsx)("img",{src:u.h.cdn.url({id:g.id,file:v,collection:"users"}),alt:"",className:"w-full h-full sm:h-32 object-cover"}):(0,o.jsx)("div",{className:"w-full h-full bg-gray-300"}),(0,o.jsxs)("div",{className:"flex justify-between sm:mb-6 xsm:mb-6 relative w-full",children:[(0,o.jsxs)("div",{className:"indicator w-24  ",children:[H?(0,o.jsx)("span",{className:"indicator-item absolute mt-[2vh] right-0 bg-green-500 badge"}):(0,o.jsx)("span",{className:"indicator-item absolute mt-[2vh] right-0 bg-[#4a4a4a] badge"}),g&&g.avatar?(0,o.jsx)("img",{src:u.h.cdn.url({id:g.id,file:g.avatar,collection:"users"}),alt:g.username,className:" w-24  h-24     rounded object-cover avatar  absolute bottom-[-3vh] left-2   border-2 border-double shadow   border-white"}):(0,o.jsx)("div",{className:"avatar placeholder   absolute bottom-[-3vh] left-2",children:(0,o.jsx)("div",{className:"bg-base-200 text-black rounded w-24  h-24   avatar    border-2   shadow   border-white",children:(0,o.jsx)("span",{className:"text-2xl",children:g&&g.username.charAt(0).toUpperCase()||"U"})})})]}),(0,o.jsxs)("div",{className:"absolute right-2 flex gap-5 ",children:[g&&g.id!==u.h.authStore.model().id?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("button",{className:"btn border-none text-white hover:bg-black  btn-sm rounded-full bg-black",children:"Message"})}):"",(0,o.jsx)("button",{onClick:()=>{var e,t;g.id===u.h.authStore.model().id?null===(t=document)||void 0===t||null===(e=t.getElementById("edit-modal"))||void 0===e||e.showModal():!0===p.includes(u.h.authStore.model().id)?(f(p.filter(e=>e!=u.h.authStore.model().id)),u.h.update({collection:"users",id:g.id,cacheKey:"user-".concat(g.id),invalidateCache:"user-profile-".concat(g.id),immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{followers:p.filter(e=>e!=u.h.authStore.model().id)}}).then(e=>{console.log(e),u.h.update({collection:"users",id:u.h.authStore.model().id,invalidateCache:"user-home-".concat(u.h.authStore.model().id),immediatelyUpdate:!0,cacheKey:"user-".concat(u.h.authStore.model().id),expand:["followers","following","following.followers","following.following"],record:{following:u.h.authStore.model().following.filter(e=>e!=g.id)}}).then(e=>{u.h.authStore.update()})})):(f([...p,u.h.authStore.model().id]),u.h.update({collection:"users",id:g.id,cacheKey:"user-".concat(g.id),invalidateCache:"user-profile-".concat(g.id),immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{followers:[...g.followers,u.h.authStore.model().id]}}).then(e=>{u.h.update({collection:"users",cacheKey:"user-".concat(u.h.authStore.model().id),id:u.h.authStore.model().id,invalidateCache:"user-home-".concat(u.h.authStore.model().id),immediatelyUpdate:!0,expand:["followers","following","following.followers","following.following"],record:{following:[...u.h.authStore.model().following,g.id]}}).then(e=>{u.h.authStore.update()})}))},className:"btn border-none  text-white hover:bg-black  btn-sm rounded-full bg-black",children:g&&g.id===u.h.authStore.model().id?"Edit Profile":p.includes(u.h.authStore.model().id)?"Unfollow":"Follow"})]})]})]}),(0,o.jsxs)("div",{className:"justify-between relative text-sm mt-[8vh] sm:mt-2 mx-4",children:[(0,o.jsxs)("div",{className:"flex w-full  hero gap-3",children:[(0,o.jsx)("p",{className:"text-2xl font-bold",children:g&&g.username||"loading"}),g&&g.isVerified?(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 fill-blue-500 text-white h-8",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}):"",g&&g.isDeveloper?(0,o.jsx)("div",{className:"tooltip    rounded tooltip-left","data-tip":"Postr Developer",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5   h-5",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})})}):"",g&&g.plus_subscriber?(0,o.jsx)("div",{className:"tooltip z[-1]","data-tip":"Subscriber since ".concat(new Date(g.plus_subscriber_since).toLocaleDateString()),children:(0,o.jsx)("span",{className:"badge badge-outline badge-md text-sm border-blue-500 z-[-1] text-sky-500",children:"Postr+ Subscriber"})}):""]}),(0,o.jsxs)("p",{className:"opacity-45",children:["@",g&&g.username||"loading"]}),(0,o.jsx)("p",{className:"mt-3 tet-md w-full  ",children:g&&""!==g.bio?g.bio:"This user has not set a bio."}),(0,o.jsxs)("div",{className:"flex flex-wrap  gap-2",children:[(0,o.jsxs)("p",{className:"hero flex mt-4 gap-2 w-full",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})}),"Joined ",g&&new Date(g.created).toLocaleDateString()||"loading"]}),(0,o.jsx)("div",{children:g&&""!==g.location?(0,o.jsxs)("p",{className:"mt-4 hero flex gap-2 w-full",children:[(0,o.jsx)(i,{})," ",(0,o.jsx)("span",{className:"text-md cursor-pointer font-medium",children:g.location})]}):""}),(0,o.jsx)("p",{children:g&&""!==g.social?(0,o.jsxs)("p",{className:"mt-4 hero flex gap-2 w-full",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),(0,o.jsx)("span",{className:"text-md cursor-pointer font-medium",children:(0,o.jsx)("span",{onClick:()=>{window.open(g.social)},className:"text-blue-500 text-md w-5/6  hover:underline",children:g.social.replace(/(^\w+:|^)\/\//,"")})})]}):""})]}),(0,o.jsxs)("div",{className:"flex gap-2 mt-2 mx-1",children:[(0,o.jsxs)("p",{className:" mt-2 text-md",children:[(0,o.jsxs)("span",{className:"font-bold",children:[" ",g&&g.following?g.following.length:0," "]}),"Following"]}),(0,o.jsxs)("p",{className:" mt-2 text-md",children:[(0,o.jsxs)("span",{className:"font-bold",children:[" ",void 0!==p?p.length:0," "]}),void 0!==p&&1===p.length?"Follower":"Followers"]})]})]}),(0,o.jsx)("div",{className:"hero w-fit flex",children:g&&(null===(l=g.expand)||void 0===l?void 0:l.followers)&&g.id!==u.h.authStore.model().id&&(null===(d=g.expand)||void 0===d?void 0:d.followers.length)>0?(0,o.jsxs)("div",{className:"avatar-group mx-3 -space-x-6 flex gap-8 text-sm   rtl:space-x-reverse",children:[g.expand.followers.map(e=>{if(u.h.authStore.model().following.includes(e.id))return(0,o.jsx)(o.Fragment,{children:e.avatar?(0,o.jsx)("div",{className:"avatar  rounded-full  ",children:(0,o.jsx)("div",{className:"w-4",children:(0,o.jsx)("img",{src:u.h.cdn.url({id:e.id,collection:"users",file:e.avatar}),alt:"",className:" object-cover"})})}):(0,o.jsx)("div",{className:"  placeholder avatar  rounded-full ",children:(0,o.jsx)("div",{className:"   ",children:(0,o.jsx)("span",{className:"text-2xl",children:e.username.charAt(0).toUpperCase()})})})})}),(0,o.jsx)("p",{className:" mt-1 opacity-70 hover:underline cursor-pointer",children:g&&g.expand.followers.length>1&&K?(0,o.jsxs)(o.Fragment,{children:["Followed by "," ",g.followers.map(t=>{if(u.h.authStore.model().following.includes(t.id))return(0,o.jsx)("a",{onClick:()=>{e.setParams({user:t.id}),e.swapPage("user")},className:"hover:underline cursor-pointer",children:t.username})})]}):""})]}):""}),(0,o.jsxs)("div",{className:"flex flex-row p-2 gap-2 justify-between    xl:border-[#f9f9f9] ",children:[(0,o.jsxs)("a",{role:"tab",onClick:()=>{"posts"!==D&&ee("posts")},className:"\n         p-2  cursor-pointer  ".concat("posts"===D?"active font-bold   ":"","\n      "),children:["Posts","posts"===D?(0,o.jsx)("div",{className:" rounded-md h-1 bg-blue-500"}):""]}),(0,o.jsxs)("a",{onClick:()=>{"replies"!==D&&ee("collections")},role:"tab",className:"  cursor-pointer  p-2  ".concat("replies"===D?"active  ":""),children:["Collections","collections"===D?(0,o.jsx)("div",{className:" rounded-md h-1 bg-blue-500"}):""]}),(0,o.jsxs)("a",{onClick:()=>{"media"!==D&&ee("media")},role:"tab",className:"\n         p-2  cursor-pointer ".concat("media"===D?"active font-bold  ":"","\n      "),children:["Media","media"===D?(0,o.jsx)("div",{className:" rounded-md h-1 bg-blue-500"}):""]}),(0,o.jsxs)("a",{onClick:()=>{"likes"!==D&&ee("likes")},role:"tab",className:"\n       p-2  cursor-pointer ".concat("likes"===D?"active font-bold":"","\n      "),children:["Likes","likes"===D?(0,o.jsx)("div",{className:" rounded-md h-2 bg-blue-500"}):""]})]}),(0,o.jsx)(n.Z,{hasMore:M,dataLength:N.length,next:function(){if(!0==b>=L){console.log("no more"),z(!1);return}"collections"!==D&&u.h.list({cacheKey:"user-feed-".concat(D,"-").concat(b,"-").concat(g.id),collection:"posts"===D?"posts":"likes"===D?"posts":"replies"===D?"comments":"media"===D?"posts":"",limit:10,filter:"posts"===D?'author.id ="'.concat(g.id,'"'):"likes"===D?'likes?~"'.concat(g.id,'" && author.id != "').concat(g.id,'"'):"replies"===D?'user.id="'.concat(g.id,'" &&post.author.id!="').concat(g.id,'"'):"media"===D?'file:length > 0  && author.id ="'.concat(g.id,'"'):"",expand:["author","comments.user","user","post","post.author","author.followers","author.following","author.following.followers","author.following.following","likes"],sort:"-created",page:b+1}).then(e=>{"media"===D&&(e.items=e.items.filter(e=>e.file.length>0)),y([...N,...e.items]),E(e.totalPages),C(e.totalItems),z(!0),j(b+1)})},loader:"",children:(0,o.jsx)("div",{className:"media"!==D||X?"flex flex-col  xl:p-0 lg:p-0 md:p-0 p-4 mb-24 \n                ".concat(N.length>0?"  xl:border xl:border-[#f9f9f9] ":"","\n                ").concat(N.length<2?"border-b-0 border-b-transparent":""):"grid grid-cols-3 gap-3   mb-24 xl:p-3 lg:p-3 md:p-3  sm:p-3 p-2",children:X?(0,o.jsx)("div",{className:"mx-auto W-full flex justify-center",children:(0,o.jsx)("span",{className:"loading loading-spinner-large loading-spinner mt-5 text-blue-600"})}):"posts"===D||"likes"===D?N.length>0?N.map((t,l)=>(0,o.jsx)("div",{className:l===N.length-1?"sm:mt-3":"",children:(0,s.createElement)(c.Z,{...t,user:g,page:e.page,params:e.params,swapPage:e.swapPage,setParams:e.setParams,key:t.id,setArray:y,array:N,pin:e=>{let o=N.find(t=>t.id===e);if(o.pinned){o.pinned=!1;let e=[...N];for(var s in e[l]=o,e=e.sort((e,t)=>new Date(t.created).getTime()-new Date(e.created).getTime()))e[s].pinned&&(e.unshift(e.splice(s,1)[0]),e=e.sort((e,t)=>{if(e.pinned&&t.pinned)return new Date(t.created).getTime()-new Date(e.created).getTime()}));u.h.update({collection:"posts",id:t.id,record:{pinned:!1},cacheKey:"user-feed-posts-".concat(b,"-").concat(g.id)}),y(e);return}o.pinned=!0;let a=[...N];a[l]=o,a.unshift(a.splice(l,1)[0]),u.h.update({collection:"posts",id:e,record:{pinned:!0},cacheKey:"user-feed-posts-".concat(b,"-").concat(g.id)}),y(a)},currentPage:b})})):(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:"text-center text-xl font-bold mt-10",children:[g&&g.id===u.h.authStore.model().id?"You":g.username,"posts"===D?" haven't posted anything yet.":"likes"===D?" hasn't liked anything yet.":""]})}):"collections"===D?N.length>0?(0,o.jsx)("div",{className:"mt-5",children:"Coming Soon"}):0===N.length?(0,o.jsx)("div",{className:"text-center text-lg mt-10",children:(0,o.jsx)("p",{className:"font-extrabold ",children:u.h.authStore.model().id===g.id?"You haven't replied to anything yet.":"@".concat(g.username," hasn't replied to anyone yet")})}):"":"media"===D?N.length>0?N.map(e=>(0,o.jsx)(o.Fragment,{children:e.file.map(t=>{let l=t.replace(/\./g,"");return(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)(h,{onClick:()=>{var e;null===(e=document.getElementById(l))||void 0===e||e.showModal()},src:u.h.cdn.url({id:e.id,collection:"posts",file:t}),height:"100%",width:"100%",alt:"",className:"w-full cursor-pointer   rounded-md h-44 object-cover"}),(0,o.jsx)(r.Z,{id:l,height:"h-[100vh]",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center h-full bg-[#121212]  relative",children:[(0,o.jsx)("svg",{onClick:()=>{var e;null===(e=document.getElementById(l))||void 0===e||e.close()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6 cursor-pointer text-white absolute left-2 top-2",children:(0,o.jsx)("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})}),(0,o.jsx)("img",{src:u.h.cdn.url({id:e.id,collection:"posts",file:t}),alt:t,className:" w-full   object-contain mt-2 cursor-pointer"})]})})]})})})):Array.from(Array(10).keys()).map(e=>(0,o.jsx)(h,{src:"",height:"100%",width:"100%",alt:"",className:"w-full   rounded-md h-44 object-cover"})):""})}),(0,o.jsxs)(r.Z,{id:"edit-modal",height:"xl:h-[75vh] xl:rounded-box xl:max-w-[75vw] h-screen",children:[(0,o.jsx)("div",{className:"mx-2 mt-3    p-0",children:(0,o.jsxs)("div",{className:"flex hero justify-between",children:[(0,o.jsx)("svg",{onClick:()=>{var e;null===(e=document)||void 0===e||e.getElementById("edit-modal").close()},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 cursor-pointer   ",children:(0,o.jsx)("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})}),(0,o.jsx)("p",{className:"text-1xl mx-8 mr-0",children:"Edit Profile"}),O?(0,o.jsx)("span",{className:"loading  loading-sm loading-spinner  text-blue-600"}):(0,o.jsx)("button",{className:"btn btn-sm rounded-full bg-black text-white ",onClick:()=>{console.log("saving"),et()},children:"Save"})]})}),(0,o.jsx)("input",{type:"file",className:"hidden",id:"change-avatar",name:"change-avatar",accept:"image/*",onChange:e=>{if(console.log(e.target.files),e.target.files){let t=e.target.files[0];if(A(t),t){let e=new FileReader;e.onload=e=>{var t;G.current.src=null===(t=e.target)||void 0===t?void 0:t.result},e.readAsDataURL(t)}}}}),(0,o.jsx)("input",{type:"file",className:"hidden",id:"change-banner",name:"change-banner",accept:"image/*",onChange:e=>{if(e.target.files){let t=e.target.files[0];R(new Blob([t],{type:t.type})),F(t);let l=new FileReader;l.onload=e=>{var t;J.current.src=null===(t=e.target)||void 0===t?void 0:t.result},l.readAsDataURL(t)}}}),(0,o.jsxs)("div",{className:"flex flex-col croll   relative mt-4",children:[(0,o.jsxs)("div",{className:"relative h-24 mb-6   flex flex-col w-full gap-2",children:[g&&""!==g.banner||g&&null!==B?(0,o.jsxs)("div",{className:"relative h-[9rem]",children:[(0,o.jsx)("img",{src:null!==B?URL.createObjectURL(B):u.h.cdn.url({id:g.id,file:g.banner,collection:"users"}),ref:J,alt:"",className:"w-full h-full object-cover"}),(0,o.jsx)("div",{className:"absolute btn btn-circle bg-[#030303] bg-opacity-25  inset-x-0 mx-auto translate-x-0   left-[-2vw] text-white top-[30%]",children:(0,o.jsx)("label",{htmlFor:"change-banner",onClick:()=>{document.getElementById("change-banner").click()},children:(0,o.jsx)("button",{children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]}):(0,o.jsxs)("div",{className:"relative h-32",children:[(0,o.jsx)("div",{className:"w-full h-36 object-cover bg-gray-300 "}),(0,o.jsx)("div",{className:"absolute btn btn-circle bg-[#030303] bg-opacity-25  inset-x-0 mx-auto translate-x-0   left-[-2vw] text-white top-[30%]",children:(0,o.jsx)("label",{htmlFor:"change-banner",onClick:()=>{document.getElementById("change-banner").click()},children:(0,o.jsx)("button",{children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]}),g&&""!==e.params.user.avatar||g&&null!==P?(0,o.jsx)("div",{className:"absolute top-[80px] left-2",children:(0,o.jsxs)("div",{className:"relative w-32  ",children:[(0,o.jsx)("img",{src:P||u.h.cdn.url({id:g.id,collection:"users",file:g.avatar}),ref:G,alt:"",className:"w-20 h-20 object-cover avatar rounded  border-slate-200 border-2"}),(0,o.jsx)("label",{htmlFor:"change-avatar",onClick:()=>{document.getElementById("change-avatar").click()},children:(0,o.jsx)("div",{className:"text-white absolute btn btn-circle btn-sm bg-[#030303] bg-opacity-25 left-[25px] top-[26px] inset-x-0   translate-x-0",children:(0,o.jsx)("button",{children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]})}):(0,o.jsx)("div",{className:"absolute top-[80px] left-5",children:(0,o.jsxs)("div",{className:"relative w-32  ",children:[(0,o.jsx)("div",{className:"w-20 h-20 object-cover bg-gray-300 avatar rounded border-slate-200 border-2"}),(0,o.jsx)("label",{htmlFor:"change-avatar",onClick:()=>{document.getElementById("change-avatar").click()},children:(0,o.jsx)("div",{className:"text-white absolute btn btn-circle btn-sm bg-[#030303] bg-opacity-50 left-[25px] top-[26px] inset-x-0   translate-x-0",children:(0,o.jsx)("button",{children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6  ",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})})})]})})]}),(0,o.jsx)("div",{className:"mt-12  p-3 sm:scroll ",children:(0,o.jsxs)("div",{className:"relativ  flex flex-col gap-3  ",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{children:"Username"}),(0,o.jsx)("textarea",{className:"w-full h-12 p-2  mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Bio",...g?{value:g.username}:{},defaultValue:e.params.user.username,onChange:e=>{if(e.target.value.length>=15){x({...g,username:e.target.value.slice(0,15)});return}x({...g,username:e.target.value})}})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("label",{children:"Bio"}),(0,o.jsx)("textarea",{className:"w-full h-20 p-2 mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Bio",value:g&&g.bio,onChange:e=>{if(e.target.value.length>=160){x({...g,bio:e.target.value.slice(0,160)});return}x({...g,bio:e.target.value})},defaultValue:e.params.user.bio}),(0,o.jsxs)("p",{className:"absolute bottom-4 right-4 text-xs opacity-50",children:[g&&g.bio.length,"/",160]})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("label",{children:"Location"}),(0,o.jsx)("textarea",{className:"w-full h-12 p-2 mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Location",value:g&&g.location,onChange:e=>{if(e.target.value.length>=30){x({...g,location:e.target.value.slice(0,30)});return}x({...g,location:e.target.value})},defaultValue:e.params.user.location}),(0,o.jsxs)("p",{className:"absolute bottom-4 right-4 text-xs opacity-50",children:[g&&g.location.length,"/30"]})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("label",{children:["Social"," ",(0,o.jsx)("span",{className:"text-sm opacity-50",children:"(Strafe, Twitter, Instagram, Website.)"})]}),(0,o.jsx)("textarea",{className:"w-full h-12 p-2 mt-2 resize-none outline-none bg-transparent textarea   border-slate-200",placeholder:"Social",value:g&&g.social,onChange:e=>{if(e.target.value.length>=40){x({...g,social:e.target.value.slice(0,40)});return}x({...g,social:e.target.value})},defaultValue:e.params.user.social})]})]})})]})]})]}),(0,o.jsx)(m.h,{}),(0,o.jsx)("div",{className:"xl:hidden lg:hidden md:hidden",children:(0,o.jsx)(a.L,{swapPage:e.swapPage})})]},e.params.user)}},5415:function(e,t,l){"use strict";l.d(t,{g:function(){return a}});var o=l(5893),s=l(7294);let a=(0,s.memo)(function(e){return(0,o.jsxs)("div",{className:"flex  flex-col gap-4 w-full \n     \n    xl:p-2  lg:p-2 md:p-2\n    ".concat(e.media?"rounded h-44 p-0":"mb-16"),children:[e.media?(0,o.jsx)("div",{className:"skeleton \n      ".concat(e.className?e.className:"h-42","\n      ").concat(e.media?"rounded":"rounded-none","\n      w-full")}):null,e.hiderows?null:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,o.jsx)("div",{className:"skeleton\n    ".concat(e.page&&"home"==e.page?"w-16 h-16":" w-12 h-12","\n    rounded  shrink-0")}),(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsx)("div",{className:"skeleton h-4 w-32 "}),(0,o.jsx)("div",{className:"skeleton h-4 w-32"})]})]})})]})})},738:function(e,t,l){"use strict";var o=l(7294),s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])})(e,t)},a=function(){return(a=Object.assign||function(e){for(var t,l=1,o=arguments.length;l<o;l++)for(var s in t=arguments[l])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},r={Pixel:"Pixel",Percent:"Percent"},n={unit:r.Percent,value:.8};function i(e){return"number"==typeof e?{unit:r.Percent,value:100*e}:"string"==typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:r.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:r.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),n):(console.warn("scrollThreshold should be string or number"),n)}var c=function(e){function t(t){var l=e.call(this,t)||this;return l.lastScrollTop=0,l.actionTriggered=!1,l.startY=0,l.currentY=0,l.dragging=!1,l.maxPullDownDistance=0,l.getScrollableTarget=function(){return l.props.scrollableTarget instanceof HTMLElement?l.props.scrollableTarget:"string"==typeof l.props.scrollableTarget?document.getElementById(l.props.scrollableTarget):(null===l.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},l.onStart=function(e){!l.lastScrollTop&&(l.dragging=!0,e instanceof MouseEvent?l.startY=e.pageY:e instanceof TouchEvent&&(l.startY=e.touches[0].pageY),l.currentY=l.startY,l._infScroll&&(l._infScroll.style.willChange="transform",l._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},l.onMove=function(e){l.dragging&&(e instanceof MouseEvent?l.currentY=e.pageY:e instanceof TouchEvent&&(l.currentY=e.touches[0].pageY),l.currentY<l.startY||(l.currentY-l.startY>=Number(l.props.pullDownToRefreshThreshold)&&l.setState({pullToRefreshThresholdBreached:!0}),l.currentY-l.startY>1.5*l.maxPullDownDistance||!l._infScroll||(l._infScroll.style.overflow="visible",l._infScroll.style.transform="translate3d(0px, "+(l.currentY-l.startY)+"px, 0px)")))},l.onEnd=function(){l.startY=0,l.currentY=0,l.dragging=!1,l.state.pullToRefreshThresholdBreached&&(l.props.refreshFunction&&l.props.refreshFunction(),l.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){l._infScroll&&(l._infScroll.style.overflow="auto",l._infScroll.style.transform="none",l._infScroll.style.willChange="unset")})},l.onScrollListener=function(e){"function"==typeof l.props.onScroll&&setTimeout(function(){return l.props.onScroll&&l.props.onScroll(e)},0);var t=l.props.height||l._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;l.actionTriggered||((l.props.inverse?l.isElementAtTop(t,l.props.scrollThreshold):l.isElementAtBottom(t,l.props.scrollThreshold))&&l.props.hasMore&&(l.actionTriggered=!0,l.setState({showLoader:!0}),l.props.next&&l.props.next()),l.lastScrollTop=t.scrollTop)},l.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},l.throttledOnScrollListener=(function(e,t,l,o){var s,a=!1,r=0;function n(){s&&clearTimeout(s)}function i(){var i=this,c=Date.now()-r,d=arguments;function h(){r=Date.now(),l.apply(i,d)}a||(o&&!s&&h(),n(),void 0===o&&c>e?h():!0!==t&&(s=setTimeout(o?function(){s=void 0}:h,void 0===o?e-c:e)))}return"boolean"!=typeof t&&(o=l,l=t,t=void 0),i.cancel=function(){n(),a=!0},i})(150,l.onScrollListener).bind(l),l.onStart=l.onStart.bind(l),l.onMove=l.onMove.bind(l),l.onEnd=l.onEnd.bind(l),l}return!function(e,t){function l(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}(t,e),t.prototype.componentDidMount=function(){if(void 0===this.props.dataLength)throw Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"==typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!=typeof this.props.refreshFunction))throw Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?a(a({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var l=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,o=i(t);return o.unit===r.Pixel?e.scrollTop<=o.value+l-e.scrollHeight+1:e.scrollTop<=o.value/100+l-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var l=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,o=i(t);return o.unit===r.Pixel?e.scrollTop+l>=e.scrollHeight-o.value:e.scrollTop+l>=o.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=a({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),l=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),s=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return o.createElement("div",{style:s,className:"infinite-scroll-component__outerdiv"},o.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&o.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},o.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!l&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(o.Component);t.Z=c}},function(e){e.O(0,[774,703,446,855,888,179],function(){return e(e.s=374)}),_N_E=e.O()}]);